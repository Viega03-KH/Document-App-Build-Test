import{u as k}from"./deliveryStore-mQ_sQNOq.js";import{u as $,G as z,r as _,a as f,o as m,b as e,g as o,h as c,f as s,j as v,v as x,w as M,l as U,H as Y,F as q,x as j}from"./index-CSjzk14l.js";import{X as S,u as N,P as L}from"./useFormValidate-BcjMOXJJ.js";import{d as V}from"./dayjs.min-BqfIiCKI.js";import{S as I}from"./square-pen-BgiZXzrr.js";import{T}from"./trash-2-wLns3X12.js";const A={class:"max-w-xl max-h-xl"},E={class:"justify-between border-b modal-card flex items-center p-4"},P={class:"justify-end border-t modal-card flex gap-2 p-4"},X={__name:"DelivryDelete",props:{id:{type:Number,required:!0}},setup(y){const i=y,n=k(),p=$(),a=z(),u=async()=>{try{await n.remove(i.id),p.show("Muvaffaqiyatli o‘chirildi!","success"),a.close()}catch(d){p.show("Xatolik yuz berdi!","error"),console.error(d)}};return(d,t)=>{const l=_("UButton");return m(),f("div",A,[e("div",E,[t[2]||(t[2]=e("p",{class:"text-black text-md font-bold uppercase"},"O‘chirish",-1)),o(l,{customClass:"bg-[#475467] rounded-full p-1",onClick:t[0]||(t[0]=r=>s(a).close())},{default:c(()=>[o(s(S),{"stroke-width":"3",class:"w-4 h-4 text-white"})]),_:1})]),t[5]||(t[5]=e("div",{class:"p-4 text-center space-y-4"},[e("p",{class:"text-base text-dark"}," Siz rostdan hamo o‘chirmoqchimisiz? ")],-1)),e("div",P,[o(l,{variant:"ghost",onClick:t[1]||(t[1]=r=>s(a).close()),disabled:s(n).loading},{default:c(()=>[...t[3]||(t[3]=[v(" Bekor qilish ",-1)])]),_:1},8,["disabled"]),o(l,{variant:"danger",onClick:u,loading:s(n).loading},{default:c(()=>[...t[4]||(t[4]=[v(" O‘chirish ",-1)])]),_:1},8,["loading"])])])}}},O={class:"flex flex-col w-[700px]"},G={class:"flex justify-between modal-border items-center p-[14px] border-b shadow-sm"},H={class:"text-black text-md font-bold uppercase"},Q={class:"flex flex-wrap -mx-2 p-4"},J={class:"w-full px-2 py-2"},K={class:"justify-end border-t modal-card modal-border flex items-center p-4"},C={__name:"DelivryForm",props:{id:{type:Number,default:null}},setup(y){const i=k(),n=z(),p=$(),{form:a,errors:u,validate:d,resetForm:t}=N({name_oz:"",name_uz:"NULL",name_ru:"NULL",name_en:"NULL"},{name_oz:{required:!0,message:"Majburiy"}}),l=y,r=!!l.id,b=async()=>{if(d())try{r?(await i.update(l.id,a),p.show("Muvaffaqiyatli yangilandi","succsess")):(await i.create(a),p.show("Muvaffaqiyatli yaratildi","succsess")),g(),t()}catch{p.show("Xatolik yuz berdi","")}},g=()=>n.close();return(B,h)=>{const w=_("UButton"),D=_("UInput");return m(),f("div",O,[e("div",G,[e("p",H,x(r?"Yangilash":"Yangi"),1),o(w,{customClass:"bg-[#475467] rounded-full p-1",onClick:g},{default:c(()=>[o(s(S),{"stroke-width":"3",class:"w-4 h-4 text-white"})]),_:1})]),e("form",{onSubmit:M(b,["prevent"]),class:"space-y-6"},[e("div",Q,[e("div",J,[o(D,{modelValue:s(a).name_oz,"onUpdate:modelValue":h[0]||(h[0]=F=>s(a).name_oz=F),label:"Yetkazib berish",placeholder:"Yetkazib berish turlarini kiriting",error:s(u).name_oz},null,8,["modelValue","error"])])]),e("div",K,[o(w,{variant:"ghost",type:"button",onClick:g,disabled:s(i).loading},{default:c(()=>[...h[1]||(h[1]=[v(" Bekor qilish ",-1)])]),_:1},8,["disabled"]),o(w,{type:"submit",variant:"primary",loading:s(i).loading},{default:c(()=>[v(x(r?"Yangilash":"Saqlash"),1)]),_:1},8,["loading"])])],32)])}}},R={class:"flex flex-col items-center"},W={class:"relative flex bg-[#0F172A] shadow-sm flex-col gap-5 sm:flex-row sm:items-center sm:justify-between p-6 w-full overflow-hidden"},Z={class:"flex-1 py-4"},ee={class:"flex flex-col gap-4 bg-[#F4F6FC] shadow-md h-screen"},te={class:"overflow-hidden rounded-lg card-dark"},se={class:"min-w-full divide-y divide-gray-100 dark:divide-gray-600"},oe={class:"divide-y divide-gray-100 dark:divide-gray-600"},re={class:"px-4 border-r py-3"},ae={class:"px-4 border-r py-3"},le={class:"px-4 border-r py-3"},ie={class:"px-4 py-3 flex gap-2 justify-end"},me={__name:"DelivryList",setup(y){const i=k(),n=z(),p=d=>n.open(X,{id:d}),a=d=>n.open(C,{id:d});function u(){n.open(C)}return U(()=>{i.fetchAll()}),(d,t)=>{const l=_("UButton");return m(),f("div",R,[e("div",W,[t[2]||(t[2]=Y('<svg class="absolute top-0 right-7 w-[400px] h-[200px] opacity-10" viewBox="0 0 200 100" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="20" cy="80" r="20" stroke="#fff" stroke-width="30" fill="none"></circle><circle cx="20" cy="80" r="10" fill="#54774B" opacity="0.5"></circle><circle cx="100" cy="50" r="50" stroke="#fff" stroke-width="20" fill="none"></circle><circle cx="100" cy="50" r="12" fill="#54774B" opacity="0.3"></circle><path d="M 0 100 C 50 80, 150 80, 200 100" stroke="#fff" stroke-width="20" fill="none"></path></svg><h3 class="text-xl font-bold text-white z-10"> Yetkazib beruvchilar ro&#39;yxati </h3>',2)),o(l,{class:"z-10",variant:"primary",onClick:t[0]||(t[0]=r=>u())},{default:c(()=>[o(s(L),{"stroke-width":"3"}),t[1]||(t[1]=e("span",{class:"px-1"},"Qo‘shish",-1))]),_:1})]),e("div",Z,[e("div",ee,[e("div",te,[e("table",se,[t[3]||(t[3]=e("thead",{class:"bg-gray-50 dark:bg-gray-800"},[e("tr",null,[e("th",{class:"px-4 border-r py-3 text-left text-sm font-bold text-gray-700 dark:text-gray-200 uppercase"}," ID "),e("th",{class:"px-4 border-r py-3 text-left text-sm font-bold text-gray-700 dark:text-gray-200 uppercase"}," Manzil "),e("th",{class:"px-4 border-r py-3 text-left text-sm font-bold text-gray-700 dark:text-gray-200 uppercase"}," Yaratilgan "),e("th",{class:"px-4 py-3 text-left text-sm font-bold text-gray-700 dark:text-gray-200 uppercase"}," Tahrirlash ")])],-1)),e("tbody",oe,[(m(!0),f(q,null,j(s(i).list,r=>(m(),f("tr",{key:r.id,class:"hover:bg-[#F4F6FC]"},[e("td",re,"ID-"+x(r.id),1),e("td",ae,x(r.name_oz),1),e("td",le,x(s(V)(r.DelivryFormd_at).format("DD MMMM YYYY")),1),e("td",ie,[o(l,{onClick:b=>a(r.id),variant:"hover"},{default:c(()=>[o(s(I),{class:"w-5 h-5"})]),_:1},8,["onClick"]),o(l,{onClick:b=>p(r.id),variant:"hover"},{default:c(()=>[o(s(T),{class:"w-5 h-5 text-red-500"})]),_:1},8,["onClick"])])]))),128))])])])])])])}}};export{me as default};
