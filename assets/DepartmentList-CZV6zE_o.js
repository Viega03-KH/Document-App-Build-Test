import{u as k}from"./departmentStore-d8-L0JPy.js";import{u as C,G as B,r as h,a as m,o as u,b as e,g as o,h as c,f as s,j as v,v as x,w as D,l as U,H as q,F as j,x as N}from"./index-m9snDiDH.js";import{X as S,u as L,P as V}from"./useFormValidate-BonXcG65.js";import{d as Y}from"./dayjs.min-Cg4NN4d1.js";import{S as I}from"./square-pen-Ba3FPZsI.js";import{T}from"./trash-2-BvdWlrNA.js";const A={class:"max-w-xl max-h-xl"},E={class:"justify-between border-b modal-card flex items-center p-4"},P={class:"justify-end border-t modal-card flex gap-2 p-4"},X={__name:"DepartmentDelete",props:{id:{type:Number,required:!0}},setup(y){const i=y,n=k(),p=C(),a=B(),f=async()=>{try{await n.remove(i.id),p.show("Muvaffaqiyatli o‘chirildi!","success"),a.close()}catch(d){p.show("Xatolik yuz berdi!","error"),console.error(d)}};return(d,t)=>{const l=h("UButton");return u(),m("div",A,[e("div",E,[t[2]||(t[2]=e("p",{class:"text-dark text-lg font-semibold"},"O‘chirish",-1)),o(l,{variant:"hover",onClick:t[0]||(t[0]=r=>s(a).close())},{default:c(()=>[o(s(S),{class:"w-5 h-5"})]),_:1})]),t[5]||(t[5]=e("div",{class:"p-4 text-center space-y-4"},[e("p",{class:"text-base text-dark"}," Siz rostdan hamo o‘chirmoqchimisiz? ")],-1)),e("div",P,[o(l,{onClick:t[1]||(t[1]=r=>s(a).close()),disabled:s(n).loading},{default:c(()=>[...t[3]||(t[3]=[v(" Bekor qilish ",-1)])]),_:1},8,["disabled"]),o(l,{variant:"danger",onClick:f,loading:s(n).loading},{default:c(()=>[...t[4]||(t[4]=[v(" O‘chirish ",-1)])]),_:1},8,["loading"])])])}}},O={class:"flex flex-col w-96"},G={class:"justify-between border-b modal-card modal-border flex items-center p-4"},H={class:"text-dark text-lg font-semibold"},Q={class:"flex flex-wrap -mx-2 p-4"},J={class:"w-full px-2 py-2"},K={class:"justify-end border-t modal-card modal-border flex items-center p-4"},$={__name:"DepartmentForm",props:{id:{type:Number,default:null}},setup(y){const i=k(),n=B(),p=C(),{form:a,errors:f,validate:d,resetForm:t}=L({name_oz:"",name_uz:"NULL",name_ru:"NULL",name_en:"NULL"},{name_oz:{required:!0,message:"Majburiy"}}),l=y,r=!!l.id,g=async()=>{if(d())try{r?(await i.update(l.id,a),p.show("Muvaffaqiyatli yangilandi","succsess")):(await i.create(a),p.show("Muvaffaqiyatli yaratildi","succsess")),b(),t()}catch{p.show("Xatolik yuz berdi","")}},b=()=>n.close();return(z,_)=>{const w=h("UButton"),M=h("UInput");return u(),m("div",O,[e("div",G,[e("p",H,x(r?"Yangilash":"Yangi"),1),o(w,{variant:"hover",onClick:b},{default:c(()=>[o(s(S),{class:"w-5 h-5"})]),_:1})]),e("form",{onSubmit:D(g,["prevent"]),class:"space-y-6"},[e("div",Q,[e("div",J,[o(M,{modelValue:s(a).name_oz,"onUpdate:modelValue":_[0]||(_[0]=F=>s(a).name_oz=F),label:"Bo'lim",placeholder:"Bo'lim kiriting",error:s(f).name_oz},null,8,["modelValue","error"])])]),e("div",K,[o(w,{type:"button",onClick:b,disabled:s(i).loading},{default:c(()=>[..._[1]||(_[1]=[v(" Bekor qilish ",-1)])]),_:1},8,["disabled"]),o(w,{type:"submit",variant:"primary",loading:s(i).loading},{default:c(()=>[v(x(r?"Yangilash":"Saqlash"),1)]),_:1},8,["loading"])])],32)])}}},R={class:"flex flex-col items-center"},W={class:"relative flex bg-[#0F172A] shadow-sm flex-col gap-5 sm:flex-row sm:items-center sm:justify-between p-6 w-full overflow-hidden"},Z={class:"flex-1 py-4"},ee={class:"flex flex-col gap-4 bg-[#F4F6FC] shadow-md h-screen"},te={class:"overflow-hidden rounded-lg card-dark"},se={class:"min-w-full divide-y divide-gray-100 dark:divide-gray-600"},oe={class:"divide-y divide-gray-100 dark:divide-gray-600"},re={class:"px-4 border-r py-3"},ae={class:"px-4 border-r py-3"},le={class:"px-4 border-r py-3"},ie={class:"px-4 py-3 flex gap-2 justify-center"},ue={__name:"DepartmentList",setup(y){const i=k(),n=B(),p=d=>n.open(X,{id:d}),a=d=>n.open($,{id:d});function f(){n.open($)}return U(()=>{i.fetchAll()}),(d,t)=>{const l=h("UButton");return u(),m("div",R,[e("div",W,[t[2]||(t[2]=q('<svg class="absolute top-0 right-7 w-[400px] h-[200px] opacity-10" viewBox="0 0 200 100" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="20" cy="80" r="20" stroke="#fff" stroke-width="30" fill="none"></circle><circle cx="20" cy="80" r="10" fill="#54774B" opacity="0.5"></circle><circle cx="100" cy="50" r="50" stroke="#fff" stroke-width="20" fill="none"></circle><circle cx="100" cy="50" r="12" fill="#54774B" opacity="0.3"></circle><path d="M 0 100 C 50 80, 150 80, 200 100" stroke="#fff" stroke-width="20" fill="none"></path></svg><h3 class="text-xl font-bold text-white z-10"> Bo&#39;limlar ro&#39;yxati </h3>',2)),o(l,{class:"z-10",variant:"primary",onClick:t[0]||(t[0]=r=>f())},{default:c(()=>[o(s(V),{"stroke-width":"3"}),t[1]||(t[1]=e("span",{class:"px-1"},"Qo‘shish",-1))]),_:1})]),e("div",Z,[e("div",ee,[e("div",te,[e("table",se,[t[3]||(t[3]=e("thead",{class:"bg-gray-50 dark:bg-gray-800"},[e("tr",null,[e("th",{class:"px-4 border-r py-3 text-left text-sm font-bold text-gray-700 dark:text-gray-200 uppercase"}," ID "),e("th",{class:"px-4 border-r py-3 text-left text-sm font-bold text-gray-700 dark:text-gray-200 uppercase"}," Manzil "),e("th",{class:"px-4 border-r py-3 text-left text-sm font-bold text-gray-700 dark:text-gray-200 uppercase"}," Yaratilgan "),e("th",{class:"px-4 py-3 text-left text-sm font-bold text-gray-700 dark:text-gray-200 uppercase"}," Tahrirlash ")])],-1)),e("tbody",oe,[(u(!0),m(j,null,N(s(i).departments,r=>(u(),m("tr",{key:r.id,class:"hover:bg-[#F4F6FC]"},[e("td",re,"ID-"+x(r.id),1),e("td",ae,x(r.name_oz),1),e("td",le,x(s(Y)(r.created_at).format("DD MMMM YYYY")),1),e("td",ie,[o(l,{onClick:g=>a(r.id),variant:"hover"},{default:c(()=>[o(s(I),{class:"w-5 h-5"})]),_:1},8,["onClick"]),o(l,{onClick:g=>p(r.id),variant:"hover"},{default:c(()=>[o(s(T),{class:"w-5 h-5 text-red-500"})]),_:1},8,["onClick"])])]))),128))])])])])])])}}};export{ue as default};
