import{d as y}from"./dayjs.min-BKV6yWyi.js";import{H as Y,C as I}from"./history-CcjlXVOq.js";import{J as U,a as f,o as c,b as e,v as n,g as a,f as o,q as V,p as z,u as A,G as D,r as b,h as m,j as $,d as P,l as N,t as H,c as S,F as O,x as Q,s as E}from"./index-CDbZ6Fa9.js";import{_ as w,u as C,S as j}from"./MultiColumnUserSelect.vue_vue_type_style_index_0_scoped_1fefd64e_lang-gPo00AIL.js";import{_ as L}from"./UPagination-bpKT0cD6.js";import{_ as G}from"./CreateTaskForm-BgCuDG3h.js";import{u as J}from"./dockstatusStore-BMsRw9jQ.js";import{X as K}from"./useFormValidate-kLZtjoVo.js";import{S as X}from"./square-pen-CXctUJay.js";import{T as R}from"./trash-2-CxDXh9iA.js";import"./chevron-right-BRVjSxrT.js";import"./usersStore-CKquJ-N2.js";import"./user-DCLnJ75f.js";const W={class:"flex flex-row"},Z={class:"flex-1 min-w-0"},ee={class:"flex flex-row items-center justify-between pb-2"},te={class:"text-sm font-extrabold text-black"},se={class:"text-sm font-medium text-[#697696]"},ae={class:"flex flex-col gap-y-2"},oe={class:"flex flex-row items-center justify-between"},le={class:"flex-1 min-w-0 truncate text-sm font-bold text-black"},ie={class:"flex-1 min-w-0 text-sm font-medium text-[#697696] line-clamp-2"},ne={class:"flex-1 min-w-0 text-sm font-medium text-[#697696] line-clamp-2"},re={class:"inline-block card-dark border text-[14px] font-semibold text-black rounded-[10px] px-3 py-2 w-fit"},de="task card-dark border-b px-3 py-4 cursor-pointer hover:bg-[#4076FF0D]",ce={__name:"TaskListItem",props:{task:{type:Object,required:!0},active:{type:Boolean,default:!1}},setup(s){const u=s,r=U(()=>y(u.task.doc_date).format("DD MMM YYYY"));return(d,t)=>(c(),f("div",{onClick:t[0]||(t[0]=v=>d.$emit("select",s.task)),class:V([de,s.active?"bg-[#4076FF0D]":""])},[e("div",W,[e("div",Z,[e("div",ee,[e("h4",te,n(s.task.incoming_document.incoming_number),1),e("h4",se,n(r.value),1)]),e("div",ae,[e("div",oe,[e("span",le,n(s.task.task_type_name),1),a(o(Y),{class:"w-5 h-5 text-blue-500"})]),e("span",ie,n(s.task.description),1),e("span",ne," Bajarish mudati: "+n(o(y)(s.task.deadline_end).format("DD MMMM YYYY")),1),e("div",re,n(s.task.user?.profile?.firstname.charAt(0))+"."+n(s.task.user?.profile?.lastname),1)])])])],2))}},ue={key:0},me={class:"grid grid-cols-2 gap-4 pb-4 p-[24px]"},fe={class:"wofull flex border-t justify-between px-[24px] hover:bg-[#F4F6FC]"},pe={class:"col-span-2 py-4 cursor-pointer rounded flex items-center gap-3 transition"},xe={class:"flex items-center justify-center w-12 h-12 rounded-full bg-blue-500 text-white font-bold text-sm uppercase"},he={class:"flex flex-col text-sm"},ke={class:"text-dark text-lg font-bold"},ve={class:"text-dark text-lg"},_e={class:"flex flex-row gap-4 items-center"},be={__name:"TaskShowItem",props:{task:{type:Object,default:null}},setup(s){return(u,r)=>s.task?(c(),f("div",ue,[e("div",me,[a(w,{label:"Bajarish muddati",value:s.task.deadline_end},null,8,["value"]),a(w,{label:"Topshiriq",value:s.task.task_type_name},null,8,["value"]),a(w,{label:"Qisqa mazmun",value:s.task.description,class:"col-span-2"},null,8,["value"])]),e("div",fe,[e("div",pe,[e("div",xe,n(s.task.user.profile.lastname[0])+n(s.task.user.profile.firstname[0]),1),e("div",he,[e("span",ke,n(s.task.user.profile.lastname)+" "+n(s.task.user.profile.firstname)+" "+n(s.task.user.profile.middlename),1),e("span",ve,n(s.task.department_name),1)])]),e("div",_e,[e("h1",null,n(o(y)(s.task.deadline_end).format("DD MMMM YYYY")),1),a(o(I),{class:"text-blue-500"})])]),r[0]||(r[0]=e("div",{class:"bg-[#F4F6FC] w-full h-14"},null,-1))])):z("",!0)}},ge={class:"max-w-xl max-h-xl"},we={class:"flex justify-between modal-border items-center p-[14px] border-b shadow-sm"},ye={class:"justify-end border-t modal-card flex gap-2 p-4"},$e={__name:"DeleteTaskForm",props:{ID:{type:Number,required:!0}},setup(s){const u=s,r=C(),d=A(),t=D(),v=async()=>{const p=await r.delete(u.ID);p.success?(d.show(p.message,"success"),r.selectedTask?.id===u.ID&&r.setSelectedTask(null),t.close()):d.show(p.message,"error")};return(p,i)=>{const x=b("UButton");return c(),f("div",ge,[e("div",we,[i[2]||(i[2]=e("p",{class:"text-dark text-lg font-semibold"},"Topshiriqni o‘chirish",-1)),a(x,{customClass:"bg-[#475467] rounded-full p-1",onClick:i[0]||(i[0]=g=>o(t).close())},{default:m(()=>[a(o(K),{"stroke-width":"3",class:"w-4 h-4 text-white"})]),_:1})]),i[5]||(i[5]=e("div",{class:"p-4 text-center space-y-4"},[e("p",{class:"text-base text-dark"}," Siz rostdan ham bu topshiriqni o‘chirmoqchimisiz? ")],-1)),e("div",ye,[a(x,{variant:"ghost",onClick:i[1]||(i[1]=g=>o(t).close()),disabled:o(r).loading},{default:m(()=>[...i[3]||(i[3]=[$(" Bekor qilish ",-1)])]),_:1},8,["disabled"]),a(x,{variant:"danger",onClick:v,loading:o(r).loading},{default:m(()=>[...i[4]||(i[4]=[$(" O‘chirish ",-1)])]),_:1},8,["loading"])])])}}},Te={class:"mx-auto"},Se={class:"grid grid-cols-1 lg:grid-cols-12"},je={class:"col-span-12 md:col-span-5 2xl:col-span-3"},De={class:"card-dark border-b-2 border-x shadow-sm"},Ce={class:"flex px-1 py-3 items-center border-b card-border justify-between"},Fe={class:"flex items-center"},qe={class:"flex gap-1"},Be={class:"h-[calc(100vh-8rem)] overflow-y-auto"},Me={class:"col-span-12 md:col-span-7 2xl:col-span-9 space-y-2 px-10 h-[calc(100vh-4rem)] overflow-y-auto"},Ye={class:"card-dark rounded-b border-b border-x"},Ie={key:0},Ue={class:"flex px-1 py-2 items-center border-b card-border justify-between"},Ve={class:"flex items-center gap-2"},ze={key:1,class:"flex flex-col"},Ae={class:"grid grid-cols-3 p-6 gap-4"},Pe={class:"flex bg-[#F4F6FC] items-center gap-4 justify-end p-6"},et={__name:"InexecutionViews",setup(s){const u=D(),r=J(),d=P(null),t=C(),v=_=>t.fetchAll(_),p=_=>{t.setSelectedTask(_)};function i(){t.selectedTask&&u.open(G,{existingTask:t.selectedTask})}function x(){t.selectedTask&&u.open($e,{ID:t.selectedTask.id})}function g(){t.setSelectedTask(null)}function F(){d.value=null,t.status_id=null,t.fetchAll()}function q(){t.status_id=d.value,t.fetchAll()}return N(()=>{t.fetchAll(),r.fetchAll()}),(_,l)=>{const h=b("UButton"),B=b("USelect"),T=b("UInput"),M=E("wave");return c(),f("div",Te,[e("div",Se,[e("div",je,[e("div",De,[e("div",Ce,[e("div",Fe,[H((c(),S(h,{onClick:g,variant:"hover"},{default:m(()=>[a(o(j),{"stroke-width":"2",class:"w-6 h-6"})]),_:1})),[[M]]),l[1]||(l[1]=e("h2",{class:"text-[14px] p-2 font-bold uppercase text-[#282F3D]"}," Topshiriqlar ",-1))]),e("div",qe,[a(L,{total:o(t).pagination.total,currentPage:o(t).pagination.current_page,lastPage:o(t).pagination.last_page,loading:o(t).loading,onChange:v},null,8,["total","currentPage","lastPage","loading"])])]),e("div",Be,[(c(!0),f(O,null,Q(o(t).tasks,k=>(c(),S(ce,{key:k.id,task:k,active:o(t).selectedTask?.id===k.id,onSelect:p},null,8,["task","active"]))),128)),l[2]||(l[2]=e("div",{class:"h-24 w-full"},null,-1))])])]),e("div",Me,[e("div",Ye,[o(t).selectedTask?(c(),f("div",Ie,[e("div",Ue,[l[5]||(l[5]=e("h2",{class:"text-[14px] p-2 font-bold uppercase text-[#282F3D]"},"Biriktirlgan topshiriq",-1)),e("div",Ve,[a(h,{onClick:i,variant:"primary"},{default:m(()=>[a(o(X),{"stroke-width":"3",class:"text-white w-6 h-4"}),l[3]||(l[3]=e("span",{class:"px-1"},"Tahrirlash",-1))]),_:1}),a(h,{onClick:x,variant:"danger"},{default:m(()=>[...l[4]||(l[4]=[$(" O'chirish ",-1)])]),_:1})])]),a(be,{task:o(t).selectedTask},null,8,["task"])])):(c(),f("div",ze,[e("div",null,[l[6]||(l[6]=e("div",{class:"flex p-3 items-center card-border border-b justify-between"},[e("h2",{class:"text-[14px] py-2 font-bold uppercase text-[#282F3D]"},"Qidirish")],-1)),e("div",Ae,[a(B,{modelValue:d.value,"onUpdate:modelValue":l[0]||(l[0]=k=>d.value=k),options:o(r).status,"option-label":"name_oz","option-value":"id",placeholder:"Hujjat holati"},null,8,["modelValue","options"]),a(T,{placeholder:"Hujjat raqami (qidiruv mavjud emas)",readonly:""}),a(T,{placeholder:"Kalit so'z (qidiruv mavjud emas)",readonly:""})])]),e("div",Pe,[a(h,{class:"flex items-center",onClick:F},{default:m(()=>[a(o(R),{"stroke-width":"2.5",class:"w-5 h-5"}),l[7]||(l[7]=e("span",{class:"px-2"},"Tozalash",-1))]),_:1}),a(h,{variant:"primary",class:"flex items-center",onClick:q},{default:m(()=>[a(o(j),{"stroke-width":"2.5",class:"w-5 h-5"}),l[8]||(l[8]=e("span",{class:"px-2"},"Qidirish",-1))]),_:1})])]))])])])])}}};export{et as default};
