import{d as $}from"./dayjs.min-BqfIiCKI.js";import{H as U,C as V}from"./history-DSpVPkuW.js";import{J as A,a as m,o as r,b as e,v as d,g as s,f as l,q as H,p as y,F as T,x as F,c as j,u as P,G as q,r as g,h as p,j as S,d as N,l as O,t as Q,s as E}from"./index-CSjzk14l.js";import{_ as u,u as M,S as D}from"./MultiColumnUserSelect.vue_vue_type_style_index_0_scoped_1fefd64e_lang-BCsQr1Kj.js";import{_ as K,u as L}from"./UFileCard-B-rxju5X.js";import{_ as G}from"./UPagination-Bh_ERdJu.js";import{_ as J}from"./CreateTaskForm-BuqEOXVk.js";import{X}from"./useFormValidate-BcjMOXJJ.js";import{S as R}from"./square-pen-BgiZXzrr.js";import{T as W}from"./trash-2-wLns3X12.js";import"./chevron-right-fchhoz2G.js";import"./usersStore-X1Eo3v4A.js";import"./user-D_-FG3ku.js";const Z={class:"flex flex-row"},ee={class:"flex-1 min-w-0"},te={class:"flex flex-row items-center justify-between pb-2"},se={class:"text-sm font-extrabold text-black"},ae={class:"text-sm font-medium text-[#697696]"},le={class:"flex flex-col gap-y-2"},oe={class:"flex flex-row items-center justify-between"},ne={class:"flex-1 min-w-0 truncate text-sm font-bold text-black"},ie={class:"flex-1 min-w-0 text-sm font-medium text-[#697696] line-clamp-2"},de={class:"flex-1 min-w-0 text-sm font-medium text-[#697696] line-clamp-2"},re={class:"inline-block card-dark border text-[14px] font-semibold text-black rounded-[10px] px-3 py-2 w-fit"},ce="task card-dark border-b px-3 py-4 cursor-pointer hover:bg-[#4076FF0D]",ue={__name:"TaskListItem",props:{task:{type:Object,required:!0},active:{type:Boolean,default:!1}},setup(t){const f=t,n=A(()=>$(f.task.doc_date).format("DD MMM YYYY"));return(c,a)=>(r(),m("div",{onClick:a[0]||(a[0]=_=>c.$emit("select",t.task)),class:H([ce,t.active?"bg-[#4076FF0D]":""])},[e("div",Z,[e("div",ee,[e("div",te,[e("h4",se,d(t.task.incoming_document.incoming_number),1),e("h4",ae,d(n.value),1)]),e("div",le,[e("div",oe,[e("span",ne,d(t.task.task_type_name),1),s(l(U),{class:"w-5 h-5 text-blue-500"})]),e("span",ie,d(t.task.description),1),e("span",de," Bajarish mudati: "+d(l($)(t.task.deadline_end).format("DD MMMM YYYY")),1),e("div",re,d(t.task.user?.profile?.firstname.charAt(0))+"."+d(t.task.user?.profile?.lastname),1)])])])],2))}},me={key:0},fe={class:"grid grid-cols-2 gap-4 pb-4 p-[24px]"},pe={class:"wofull flex border-t justify-between px-[24px] hover:bg-[#F4F6FC]"},ve={class:"col-span-2 py-4 cursor-pointer rounded flex items-center gap-3 transition"},xe={class:"flex items-center justify-center w-12 h-12 rounded-full bg-blue-500 text-white font-bold text-sm uppercase"},ke={class:"flex flex-col text-sm"},he={class:"text-dark text-lg font-bold"},_e={class:"text-dark text-lg"},be={class:"flex flex-row gap-4 items-center"},ge={key:1,class:"p-[24px]"},we={class:"grid grid-cols-1 md:grid-cols-2 gap-4 pb-4"},ye={key:0},$e={class:"grid grid-cols-2 gap-2"},Te={__name:"TaskShowItem",props:{task:{type:Object,default:null}},setup(t){return(f,n)=>(r(),m(T,null,[t.task?(r(),m("div",me,[e("div",fe,[s(u,{label:"Bajarish muddati",value:t.task.deadline_end},null,8,["value"]),s(u,{label:"Topshiriq",value:t.task.task_type_name},null,8,["value"]),s(u,{label:"Qisqa mazmun",value:t.task.description,class:"col-span-2"},null,8,["value"])]),e("div",pe,[e("div",ve,[e("div",xe,d(t.task.user.profile.lastname[0])+d(t.task.user.profile.firstname[0]),1),e("div",ke,[e("span",he,d(t.task.user.profile.lastname)+" "+d(t.task.user.profile.firstname)+" "+d(t.task.user.profile.middlename),1),e("span",_e,d(t.task.department_name),1)])]),e("div",be,[e("h1",null,d(l($)(t.task.deadline_end).format("DD MMMM YYYY")),1),s(l(V),{class:"text-blue-500"})])]),n[0]||(n[0]=e("div",{class:"bg-[#F4F6FC] w-full h-14"},null,-1))])):y("",!0),t.task.incoming_document?(r(),m("div",ge,[e("div",we,[s(u,{label:"Kelib tushgan raqam",value:t.task.incoming_document.incoming_number},null,8,["value"]),s(u,{label:"Chiqish raqami",value:t.task.incoming_document.outgoing_number},null,8,["value"]),s(u,{label:"Hujjat nomi",value:t.task.incoming_document.document_name,class:"md:col-span-2"},null,8,["value"]),s(u,{label:"Telefon raqam",value:t.task.incoming_document.phone_number},null,8,["value"]),s(u,{label:"Tashkilot",value:t.task.incoming_document.organization_name_oz},null,8,["value"]),s(u,{label:"Hujjat turi",value:t.task.incoming_document.doc_type_name_oz},null,8,["value"]),s(u,{label:"Yetkazib berish usuli",value:t.task.incoming_document.delivery_methods_name_oz},null,8,["value"]),s(u,{label:"Masala turi",value:t.task.incoming_document.issue_type_name_oz},null,8,["value"])]),t.task.incoming_document.files?.length?(r(),m("div",ye,[n[1]||(n[1]=e("h3",{class:"font-semibold mb-2"},"Fayllar:",-1)),e("div",$e,[(r(!0),m(T,null,F(t.task.incoming_document.files,c=>(r(),j(K,{key:c.id,file:c},null,8,["file"]))),128))])])):y("",!0)])):y("",!0)],64))}},je={class:"max-w-xl max-h-xl"},Se={class:"flex justify-between modal-border items-center p-[14px] border-b shadow-sm"},Ce={class:"justify-end border-t modal-card flex gap-2 p-4"},De={__name:"DeleteTaskForm",props:{ID:{type:Number,required:!0}},setup(t){const f=t,n=M(),c=P(),a=q(),_=async()=>{const v=await n.delete(f.ID);v.success?(c.show(v.message,"success"),n.selectedTask?.id===f.ID&&n.setSelectedTask(null),a.close()):c.show(v.message,"error")};return(v,i)=>{const x=g("UButton");return r(),m("div",je,[e("div",Se,[i[2]||(i[2]=e("p",{class:"text-dark text-lg font-semibold"},"Topshiriqni o‘chirish",-1)),s(x,{customClass:"bg-[#475467] rounded-full p-1",onClick:i[0]||(i[0]=w=>l(a).close())},{default:p(()=>[s(l(X),{"stroke-width":"3",class:"w-4 h-4 text-white"})]),_:1})]),i[5]||(i[5]=e("div",{class:"p-4 text-center space-y-4"},[e("p",{class:"text-base text-dark"}," Siz rostdan ham bu topshiriqni o‘chirmoqchimisiz? ")],-1)),e("div",Ce,[s(x,{variant:"ghost",onClick:i[1]||(i[1]=w=>l(a).close()),disabled:l(n).loading},{default:p(()=>[...i[3]||(i[3]=[S(" Bekor qilish ",-1)])]),_:1},8,["disabled"]),s(x,{variant:"danger",onClick:_,loading:l(n).loading},{default:p(()=>[...i[4]||(i[4]=[S(" O‘chirish ",-1)])]),_:1},8,["loading"])])])}}},Fe={class:"mx-auto"},qe={class:"grid grid-cols-1 lg:grid-cols-12"},Me={class:"col-span-12 md:col-span-5 2xl:col-span-3"},ze={class:"card-dark border-b-2 border-x shadow-sm"},Be={class:"flex px-1 py-3 items-center border-b card-border justify-between"},Ye={class:"flex items-center"},Ie={class:"flex gap-1"},Ue={class:"h-[calc(100vh-8rem)] overflow-y-auto"},Ve={class:"col-span-12 md:col-span-7 2xl:col-span-9 space-y-2 px-10 h-[calc(100vh-4rem)] overflow-y-auto"},Ae={class:"card-dark rounded-b border-b border-x"},He={key:0},Pe={class:"flex px-1 py-2 items-center border-b card-border justify-between"},Ne={class:"flex items-center gap-2"},Oe={key:1,class:"flex flex-col"},Qe={class:"grid grid-cols-3 p-6 gap-4"},Ee={class:"flex bg-[#F4F6FC] items-center gap-4 justify-end p-6"},ot={__name:"InexecutionViews",setup(t){const f=q(),n=L(),c=N(null),a=M(),_=b=>a.fetchAll(b),v=b=>{a.setSelectedTask(b)};function i(){a.selectedTask&&f.open(J,{existingTask:a.selectedTask})}function x(){a.selectedTask&&f.open(De,{ID:a.selectedTask.id})}function w(){a.setSelectedTask(null)}function z(){c.value=null,a.status_id=null,a.fetchAll()}function B(){a.status_id=c.value,a.fetchAll()}return O(()=>{a.fetchAll(),n.fetchAll()}),(b,o)=>{const k=g("UButton"),Y=g("USelect"),C=g("UInput"),I=E("wave");return r(),m("div",Fe,[e("div",qe,[e("div",Me,[e("div",ze,[e("div",Be,[e("div",Ye,[Q((r(),j(k,{onClick:w,variant:"hover"},{default:p(()=>[s(l(D),{"stroke-width":"2",class:"w-6 h-6"})]),_:1})),[[I]]),o[1]||(o[1]=e("h2",{class:"text-[14px] p-2 font-bold uppercase text-[#282F3D]"}," Topshiriqlar ",-1))]),e("div",Ie,[s(G,{total:l(a).pagination.total,currentPage:l(a).pagination.current_page,lastPage:l(a).pagination.last_page,loading:l(a).loading,onChange:_},null,8,["total","currentPage","lastPage","loading"])])]),e("div",Ue,[(r(!0),m(T,null,F(l(a).tasks,h=>(r(),j(ue,{key:h.id,task:h,active:l(a).selectedTask?.id===h.id,onSelect:v},null,8,["task","active"]))),128)),o[2]||(o[2]=e("div",{class:"h-24 w-full"},null,-1))])])]),e("div",Ve,[e("div",Ae,[l(a).selectedTask?(r(),m("div",He,[e("div",Pe,[o[5]||(o[5]=e("h2",{class:"text-[14px] p-2 font-bold uppercase text-[#282F3D]"},"Biriktirlgan topshiriq",-1)),e("div",Ne,[s(k,{onClick:i,variant:"primary"},{default:p(()=>[s(l(R),{"stroke-width":"3",class:"text-white w-6 h-4"}),o[3]||(o[3]=e("span",{class:"px-1"},"Tahrirlash",-1))]),_:1}),s(k,{onClick:x,variant:"danger"},{default:p(()=>[...o[4]||(o[4]=[S(" O'chirish ",-1)])]),_:1})])]),s(Te,{task:l(a).selectedTask},null,8,["task"])])):(r(),m("div",Oe,[e("div",null,[o[6]||(o[6]=e("div",{class:"flex p-3 items-center card-border border-b justify-between"},[e("h2",{class:"text-[14px] py-2 font-bold uppercase text-[#282F3D]"},"Qidirish")],-1)),e("div",Qe,[s(Y,{modelValue:c.value,"onUpdate:modelValue":o[0]||(o[0]=h=>c.value=h),options:l(n).status,"option-label":"name_oz","option-value":"id",placeholder:"Hujjat holati"},null,8,["modelValue","options"]),s(C,{placeholder:"Hujjat raqami (qidiruv mavjud emas)",readonly:""}),s(C,{placeholder:"Kalit so'z (qidiruv mavjud emas)",readonly:""})])]),e("div",Ee,[s(k,{class:"flex items-center",onClick:z},{default:p(()=>[s(l(W),{"stroke-width":"2.5",class:"w-5 h-5"}),o[7]||(o[7]=e("span",{class:"px-2"},"Tozalash",-1))]),_:1}),s(k,{variant:"primary",class:"flex items-center",onClick:B},{default:p(()=>[s(l(D),{"stroke-width":"2.5",class:"w-5 h-5"}),o[8]||(o[8]=e("span",{class:"px-2"},"Qidirish",-1))]),_:1})])]))])])])])}}};export{ot as default};
