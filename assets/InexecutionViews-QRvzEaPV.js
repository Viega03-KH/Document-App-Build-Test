import{H as C,Y as U,F as I,a as V,u as S}from"./dockStore-aIejFA1e.js";import{r as $,x as D,d as r,o as n,z as F,y as B,e as t,t as o,l as H,h as m,i as x,f as k,F as b,_ as z,b as h,s as _,c as y,m as L}from"./index-CePROxAF.js";import{U as q}from"./UModal-DSj4qQsJ.js";const E=["onClick"],M={class:"flex flex-col md:flex-row md:items-start justify-between gap-4 md:gap-6"},T={class:"flex-1 min-w-0"},N={class:"font-bold text-xl text-gray-800 dark:text-white/90 pb-1"},P={class:"flex flex-wrap font-medium items-center gap-2 md:gap-3 text-md"},R={class:"flex w-full items-center gap-1"},O={class:"card-dark mt-2 inline-flex rounded border px-2 py-0.5 text-md font-semibold truncate max-w-full"},Y={class:"flex-shrink-0 mt-2 md:mt-0"},A={__name:"FileList",props:{dockfiles:{type:Array,default:()=>[]}},emits:["select"],setup(s,{emit:u}){return(c,d)=>{const f=$("UTooltip"),a=D("wave");return n(!0),r(b,null,F(s.dockfiles,p=>B((n(),r("div",{key:p.id,onClick:g=>c.$emit("select",p),class:"task card-dark border-y px-2 py-2 cursor-pointer hover:bg-zinc-100 dark:hover:bg-zinc-600/50"},[t("div",M,[t("div",T,[t("h4",N," SSV-"+o(p.id)+"/05 ",1),t("div",P,[t("span",R,[d[0]||(d[0]=t("span",null,"Mazmun:",-1)),H(" "+o(p.short_content),1)]),d[1]||(d[1]=t("span",{class:"flex items-center gap-1"}," Bajarish muddati: 11 yan 2025 ",-1))]),t("span",O,o(p.executor),1)]),t("div",Y,[m(f,{text:"Ijro holatida",position:"top"},{default:x(()=>[m(k(C),{class:"w-6 h-6 text-blue-500"})]),_:1})])])],8,E)),[[a]])),128)}}},K={key:0,class:"rounded card-dark border-2 shadow-md p-6"},G={class:"grid grid-cols-1 md:grid-cols-2 gap-4 pb-4"},Q={class:"info-item font-medium text-md"},X={class:"info-item font-medium text-md"},J={class:"info-item font-medium text-md"},W={class:"info-item font-medium text-md"},Z={class:"info-item font-medium text-md"},tt={class:"info-item font-medium text-md"},et={class:"info-item font-medium text-md"},st={class:"capitalize"},ot={class:"info-item md:col-span-2 font-medium text-md"},lt={class:"info-item md:col-span-2 font-medium text-md"},it={class:"info-item font-medium text-md"},nt={class:"info-item font-medium text-md"},dt={class:"info-item font-medium text-md"},at={class:"info-item font-medium text-md"},rt={key:0},ct={class:"grid grid-cols-1 md:grid-cols-2 gap-1"},mt={class:"flex items-center gap-4"},ut={class:"flex items-center justify-center bg-blue-500 text-white font-semibold px-4 py-4 rounded"},ft={class:"flex items-center gap-2"},pt={class:"w-full md:w-3/4 m-auto max-h-[90vh] overflow-auto"},xt={key:1,class:"text-center mt-10"},w="/api",kt={__name:"FileShow",props:{dockfile:{type:Object,default:null}},setup(s){const u=h(!1),c=h(null),d=l=>l.split(".").pop().toLowerCase(),f=l=>l.split("/").pop(),a=l=>{try{const e=document.createElement("a");return e.href=l,e.pathname}catch{return l}},p=l=>{d(l)==="pdf"?(c.value=w+a(l),u.value=!0):alert("PDF fayl emas, ko‘rish mumkin emas")},g=async l=>{try{const e=await fetch(w+a(l));if(!e.ok)throw new Error("Fayl yuklanmadi");const v=await e.blob(),i=document.createElement("a");i.href=window.URL.createObjectURL(v),i.download=f(l),i.click(),window.URL.revokeObjectURL(i.href)}catch(e){console.error("Fayl yuklashda xato:",e)}};return(l,e)=>{const v=$("UButton");return n(),r(b,null,[s.dockfile?(n(),r("div",K,[e[15]||(e[15]=t("h2",{class:"mb-6 text-lg font-semibold border-b border-zinc-200 dark:border-zinc-600 pb-2"}," Hujjat ",-1)),t("div",G,[t("div",Q,[e[1]||(e[1]=t("p",{class:"text-dark"},"ID",-1)),t("p",null,o(s.dockfile.id),1)]),t("div",X,[e[2]||(e[2]=t("p",{class:"text-dark"},"Kelib tushgan raqam",-1)),t("p",null,o(s.dockfile.incoming_number),1)]),t("div",J,[e[3]||(e[3]=t("p",{class:"text-dark text-cm"},"Chiqish raqami",-1)),t("p",null,o(s.dockfile.outgoing_number),1)]),t("div",W,[e[4]||(e[4]=t("p",{class:"text-dark"},"Hujjat nomi",-1)),t("p",null,o(s.dockfile.document_name),1)]),t("div",Z,[e[5]||(e[5]=t("p",{class:"text-dark"},"Ijrochi",-1)),t("p",null,o(s.dockfile.executor),1)]),t("div",tt,[e[6]||(e[6]=t("p",{class:"text-dark"},"Telefon raqam",-1)),t("p",null,o(s.dockfile.phone_number),1)]),t("div",et,[e[7]||(e[7]=t("p",{class:"text-dark"},"Holati",-1)),t("p",st,o(s.dockfile.status),1)]),t("div",ot,[e[8]||(e[8]=t("p",{class:"text-dark"},"Qisqa mazmun",-1)),t("p",null,o(s.dockfile.short_content),1)]),t("div",lt,[e[9]||(e[9]=t("p",{class:"text-dark"},"Izoh",-1)),t("p",null,o(s.dockfile.description),1)]),t("div",it,[e[10]||(e[10]=t("p",{class:"text-dark"},"Tashkilot",-1)),t("p",null,o(s.dockfile.organization_name_oz),1)]),t("div",nt,[e[11]||(e[11]=t("p",{class:"text-dark"},"Hujjat turi",-1)),t("p",null,o(s.dockfile.doc_type_name_oz),1)]),t("div",dt,[e[12]||(e[12]=t("p",{class:"text-dark"},"Yetkazib berish usuli",-1)),t("p",null,o(s.dockfile.delivery_methods_name_oz),1)]),t("div",at,[e[13]||(e[13]=t("p",{class:"text-dark"},"Masala turi",-1)),t("p",null,o(s.dockfile.issue_type_name_oz),1)])]),s.dockfile.files?.length?(n(),r("div",rt,[e[14]||(e[14]=t("p",{class:"font-semibold mb-3"},"Fayllar",-1)),t("div",ct,[(n(!0),r(b,null,F(s.dockfile.files,i=>(n(),r("div",{key:i.id,class:"flex items-center justify-between border-2 card-dark rounded px-4 py-3 hover:bg-blue-100 dark:hover:bg-zinc-600 cursor-pointer"},[t("div",mt,[t("div",ut,o(d(i.url).toUpperCase()),1),t("div",null,[t("p",null,o(f(i.url)),1)])]),t("div",ft,[d(i.url)==="pdf"?(n(),y(v,{key:0,onClick:j=>p(i.url),class:"p-2 rounded-full hover:bg-blue-200 transition",title:"Ko‘rish"},{default:x(()=>[m(k(I),{class:"w-5 h-5 text-zinc-500"})]),_:1},8,["onClick"])):_("",!0),m(v,{onClick:j=>g(i.url),class:"p-2 rounded-full hover:bg-blue-200 transition",title:"Yuklab olish"},{default:x(()=>[m(k(V),{class:"w-5 h-5 text-zinc-500"})]),_:1},8,["onClick"])])]))),128))])])):_("",!0)])):_("",!0),m(q,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=i=>u.value=i),width:".ignore-dark w-full rounded-[0px] h-screen bg-zinc-50",title:"Hujjat fayli"},{footer:x(()=>[...e[16]||(e[16]=[])]),default:x(()=>[e[17]||(e[17]=t("div",{class:"w-full card-dark py-4 border"},null,-1)),t("div",pt,[c.value?(n(),y(k(U),{key:0,source:c.value,"annotation-layer":"","text-layer":"",class:"pdf-viewer"},null,8,["source"])):(n(),r("p",xt,"PDF fayl ko‘rsatib bo‘lmaydi"))])]),_:1},8,["modelValue"])],64)}}},vt=z(kt,[["__scopeId","data-v-98ee0d4c"]]),_t={class:"mx-auto max-w-(--breakpoint-2xl)"},bt={class:"space-y gap-y-2"},ht={class:"grid grid-cols-1 lg:grid-cols-12"},gt={class:"lg:col-span-4 2xl:col-span-4 pr-2"},yt={class:"rounded card-dark border-2"},wt={class:"overflow-hidden rounded"},$t={class:"custom-scrollbar h-screen overflow-y-auto"},Ft={class:"space-y-2 lg:col-span-8 2xl:col-span-8"},zt={__name:"InexecutionViews",setup(s){const u=S(),c=h(null);L(()=>{u.fetchAll()});const d=f=>{c.value=f};return(f,a)=>(n(),r("div",_t,[t("div",bt,[a[1]||(a[1]=t("div",{class:"w-ful pb-2"},null,-1)),t("div",ht,[t("div",gt,[t("div",yt,[a[0]||(a[0]=t("h2",{class:"text-lg font-semibold text-dark p-2 py-4"},"Topshiriqlar",-1)),t("div",wt,[t("div",$t,[m(A,{dockfiles:k(u).docks,onSelect:d},null,8,["dockfiles"])])])])]),t("div",Ft,[m(vt,{dockfile:c.value},null,8,["dockfile"])])])])]))}},It=z(zt,[["__scopeId","data-v-7943e88b"]]);export{It as default};
