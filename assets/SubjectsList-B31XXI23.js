import{u as k}from"./subjectStore-DfyQnKpG.js";import{u as j,G as S,r as _,a as f,o as m,b as t,g as o,h as c,f as s,j as b,v as x,w as F,l as U,H as q,F as N,x as D}from"./index-CSjzk14l.js";import{X as $,u as L,P as V}from"./useFormValidate-BcjMOXJJ.js";import{d as Y}from"./dayjs.min-BqfIiCKI.js";import{S as I}from"./square-pen-BgiZXzrr.js";import{T}from"./trash-2-wLns3X12.js";const A={class:"max-w-xl max-h-xl"},E={class:"justify-between border-b modal-card flex items-center p-4"},P={class:"justify-end border-t modal-card flex gap-2 p-4"},X={__name:"SubjectsDelete",props:{id:{type:Number,required:!0}},setup(h){const i=h,n=k(),p=j(),a=S(),u=async()=>{try{await n.remove(i.id),p.show("Muvaffaqiyatli o‘chirildi!","success"),a.close()}catch(d){p.show("Xatolik yuz berdi!","error"),console.error(d)}};return(d,e)=>{const l=_("UButton");return m(),f("div",A,[t("div",E,[e[2]||(e[2]=t("p",{class:"text-dark text-lg font-semibold"},"O‘chirish",-1)),o(l,{customClass:"bg-[#475467] rounded-full p-1",onClick:e[0]||(e[0]=r=>s(a).close())},{default:c(()=>[o(s($),{"stroke-width":"3",class:"w-4 h-4 text-white"})]),_:1})]),e[5]||(e[5]=t("div",{class:"p-4 text-center space-y-4"},[t("p",{class:"text-base text-dark"}," Siz rostdan hamo o‘chirmoqchimisiz? ")],-1)),t("div",P,[o(l,{onClick:e[1]||(e[1]=r=>s(a).close()),disabled:s(n).loading},{default:c(()=>[...e[3]||(e[3]=[b(" Bekor qilish ",-1)])]),_:1},8,["disabled"]),o(l,{variant:"danger",onClick:u,loading:s(n).loading},{default:c(()=>[...e[4]||(e[4]=[b(" O‘chirish ",-1)])]),_:1},8,["loading"])])])}}},H={class:"flex flex-col w-[700px]"},O={class:"flex justify-between modal-border items-center p-[14px] border-b"},G={class:"text-dark text-lg font-bold uppercase"},Q={class:"flex flex-wrap -mx-2 p-4"},J={class:"w-full px-2 py-2"},K={class:"justify-end border-t modal-card modal-border flex items-center p-4"},C={__name:"SubjectsForm",props:{id:{type:Number,default:null}},setup(h){const i=k(),n=S(),p=j(),{form:a,errors:u,validate:d,resetForm:e}=L({name_oz:"",name_uz:"NULL",name_ru:"NULL",name_en:"NULL"},{name_oz:{required:!0,message:"Majburiy"}}),l=h,r=!!l.id,g=async()=>{if(d())try{r?(await i.update(l.id,a),p.show("Muvaffaqiyatli yangilandi","succsess")):(await i.create(a),p.show("Muvaffaqiyatli yaratildi","succsess")),v(),e()}catch{p.show("Xatolik yuz berdi","")}},v=()=>n.close();return(M,y)=>{const w=_("UButton"),B=_("UInput");return m(),f("div",H,[t("div",O,[t("p",G,x(r?"Yangilash":"Yangi"),1),o(w,{customClass:"bg-[#475467] rounded-full p-1",onClick:v},{default:c(()=>[o(s($),{"stroke-width":"3",class:"w-4 h-4 text-white"})]),_:1})]),t("form",{onSubmit:F(g,["prevent"]),class:"space-y-6"},[t("div",Q,[t("div",J,[o(B,{modelValue:s(a).name_oz,"onUpdate:modelValue":y[0]||(y[0]=z=>s(a).name_oz=z),label:"Masala",placeholder:"Masala kiriting",error:s(u).name_oz},null,8,["modelValue","error"])])]),t("div",K,[o(w,{type:"button",onClick:v,variant:"ghost",disabled:s(i).loading},{default:c(()=>[...y[1]||(y[1]=[b(" Bekor qilish ",-1)])]),_:1},8,["disabled"]),o(w,{type:"submit",variant:"primary",loading:s(i).loading},{default:c(()=>[b(x(r?"Yangilash":"Saqlash"),1)]),_:1},8,["loading"])])],32)])}}},R={class:"flex flex-col items-center"},W={class:"relative flex bg-[#0F172A] shadow-sm flex-col gap-5 sm:flex-row sm:items-center sm:justify-between p-6 w-full overflow-hidden"},Z={class:"flex-1 py-4"},tt={class:"flex flex-col gap-4 bg-[#F4F6FC] shadow-md h-screen"},et={class:"overflow-hidden rounded-lg card-dark"},st={class:"min-w-full divide-y divide-gray-100 dark:divide-gray-600"},ot={class:"divide-y divide-gray-100 dark:divide-gray-600"},rt={class:"px-4 border-r py-3"},at={class:"px-4 border-r py-3"},lt={class:"px-4 border-r py-3"},it={class:"px-4 py-3 flex gap-2 justify-center"},mt={__name:"SubjectsList",setup(h){const i=k(),n=S(),p=d=>n.open(X,{id:d}),a=d=>n.open(C,{id:d});function u(){n.open(C)}return U(()=>{i.fetchAll()}),(d,e)=>{const l=_("UButton");return m(),f("div",R,[t("div",W,[e[2]||(e[2]=q('<svg class="absolute top-0 right-7 w-[400px] h-[200px] opacity-10" viewBox="0 0 200 100" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="20" cy="80" r="20" stroke="#fff" stroke-width="30" fill="none"></circle><circle cx="20" cy="80" r="10" fill="#54774B" opacity="0.5"></circle><circle cx="100" cy="50" r="50" stroke="#fff" stroke-width="20" fill="none"></circle><circle cx="100" cy="50" r="12" fill="#54774B" opacity="0.3"></circle><path d="M 0 100 C 50 80, 150 80, 200 100" stroke="#fff" stroke-width="20" fill="none"></path></svg><h3 class="text-xl font-bold text-white z-10"> Hujjat turi </h3>',2)),o(l,{class:"z-10",variant:"primary",onClick:e[0]||(e[0]=r=>u())},{default:c(()=>[o(s(V),{"stroke-width":"3"}),e[1]||(e[1]=t("span",{class:"px-1"},"Qo‘shish",-1))]),_:1})]),t("div",Z,[t("div",tt,[t("div",et,[t("table",st,[e[3]||(e[3]=t("thead",{class:"bg-gray-50 dark:bg-gray-800"},[t("tr",null,[t("th",{class:"px-4 border-r py-3 text-left text-sm font-bold text-gray-700 dark:text-gray-200 uppercase"}," ID "),t("th",{class:"px-4 border-r py-3 text-left text-sm font-bold text-gray-700 dark:text-gray-200 uppercase"}," Nomi "),t("th",{class:"px-4 border-r py-3 text-left text-sm font-bold text-gray-700 dark:text-gray-200 uppercase"}," Yaratilgan "),t("th",{class:"px-4 py-3 text-left text-sm font-bold text-gray-700 dark:text-gray-200 uppercase"}," Tahrirlash ")])],-1)),t("tbody",ot,[(m(!0),f(N,null,D(s(i).subjects,r=>(m(),f("tr",{key:r.id,class:"hover:bg-[#F4F6FC]"},[t("td",rt,"ID-"+x(r.id),1),t("td",at,x(r.name_oz),1),t("td",lt,x(s(Y)(r.created_at).format("DD MMMM YYYY")),1),t("td",it,[o(l,{onClick:g=>a(r.id),variant:"hover"},{default:c(()=>[o(s(I),{class:"w-5 h-5"})]),_:1},8,["onClick"]),o(l,{onClick:g=>p(r.id),variant:"hover"},{default:c(()=>[o(s(T),{class:"w-5 h-5 text-red-500"})]),_:1},8,["onClick"])])]))),128))])])])])])])}}};export{mt as default};
