import{u as k}from"./subjectStore-7JCAFQtX.js";import{u as $,G as S,r as h,a as u,o as m,b as e,g as o,h as c,f as s,j as v,v as x,w as F,l as U,H as q,F as N,x as D}from"./index-m9snDiDH.js";import{X as C,u as L,P as V}from"./useFormValidate-BonXcG65.js";import{d as Y}from"./dayjs.min-Cg4NN4d1.js";import{S as I}from"./square-pen-Ba3FPZsI.js";import{T}from"./trash-2-BvdWlrNA.js";const A={class:"max-w-xl max-h-xl"},E={class:"justify-between border-b modal-card flex items-center p-4"},P={class:"justify-end border-t modal-card flex gap-2 p-4"},X={__name:"SubjectsDelete",props:{id:{type:Number,required:!0}},setup(y){const i=y,n=k(),p=$(),r=S(),f=async()=>{try{await n.remove(i.id),p.show("Muvaffaqiyatli o‘chirildi!","success"),r.close()}catch(d){p.show("Xatolik yuz berdi!","error"),console.error(d)}};return(d,t)=>{const l=h("UButton");return m(),u("div",A,[e("div",E,[t[2]||(t[2]=e("p",{class:"text-dark text-lg font-semibold"},"O‘chirish",-1)),o(l,{variant:"hover",onClick:t[0]||(t[0]=a=>s(r).close())},{default:c(()=>[o(s(C),{class:"w-5 h-5"})]),_:1})]),t[5]||(t[5]=e("div",{class:"p-4 text-center space-y-4"},[e("p",{class:"text-base text-dark"}," Siz rostdan hamo o‘chirmoqchimisiz? ")],-1)),e("div",P,[o(l,{onClick:t[1]||(t[1]=a=>s(r).close()),disabled:s(n).loading},{default:c(()=>[...t[3]||(t[3]=[v(" Bekor qilish ",-1)])]),_:1},8,["disabled"]),o(l,{variant:"danger",onClick:f,loading:s(n).loading},{default:c(()=>[...t[4]||(t[4]=[v(" O‘chirish ",-1)])]),_:1},8,["loading"])])])}}},H={class:"flex flex-col w-96"},O={class:"justify-between border-b modal-card modal-border flex items-center p-4"},G={class:"text-dark text-lg font-semibold"},Q={class:"flex flex-wrap -mx-2 p-4"},J={class:"w-full px-2 py-2"},K={class:"justify-end border-t modal-card modal-border flex items-center p-4"},j={__name:"SubjectsForm",props:{id:{type:Number,default:null}},setup(y){const i=k(),n=S(),p=$(),{form:r,errors:f,validate:d,resetForm:t}=L({name_oz:"",name_uz:"NULL",name_ru:"NULL",name_en:"NULL"},{name_oz:{required:!0,message:"Majburiy"}}),l=y,a=!!l.id,b=async()=>{if(d())try{a?(await i.update(l.id,r),p.show("Muvaffaqiyatli yangilandi","succsess")):(await i.create(r),p.show("Muvaffaqiyatli yaratildi","succsess")),g(),t()}catch{p.show("Xatolik yuz berdi","")}},g=()=>n.close();return(M,_)=>{const w=h("UButton"),B=h("UInput");return m(),u("div",H,[e("div",O,[e("p",G,x(a?"Yangilash":"Yangi"),1),o(w,{variant:"hover",onClick:g},{default:c(()=>[o(s(C),{class:"w-5 h-5"})]),_:1})]),e("form",{onSubmit:F(b,["prevent"]),class:"space-y-6"},[e("div",Q,[e("div",J,[o(B,{modelValue:s(r).name_oz,"onUpdate:modelValue":_[0]||(_[0]=z=>s(r).name_oz=z),label:"Masala",placeholder:"Masala kiriting",error:s(f).name_oz},null,8,["modelValue","error"])])]),e("div",K,[o(w,{type:"button",onClick:g,disabled:s(i).loading},{default:c(()=>[..._[1]||(_[1]=[v(" Bekor qilish ",-1)])]),_:1},8,["disabled"]),o(w,{type:"submit",variant:"primary",loading:s(i).loading},{default:c(()=>[v(x(a?"Yangilash":"Saqlash"),1)]),_:1},8,["loading"])])],32)])}}},R={class:"flex flex-col items-center"},W={class:"relative flex bg-[#0F172A] shadow-sm flex-col gap-5 sm:flex-row sm:items-center sm:justify-between p-6 w-full overflow-hidden"},Z={class:"flex-1 py-4"},ee={class:"flex flex-col gap-4 bg-[#F4F6FC] shadow-md h-screen"},te={class:"overflow-hidden rounded-lg card-dark"},se={class:"min-w-full divide-y divide-gray-100 dark:divide-gray-600"},oe={class:"divide-y divide-gray-100 dark:divide-gray-600"},ae={class:"px-4 border-r py-3"},re={class:"px-4 border-r py-3"},le={class:"px-4 border-r py-3"},ie={class:"px-4 py-3 flex gap-2 justify-center"},me={__name:"SubjectsList",setup(y){const i=k(),n=S(),p=d=>n.open(X,{id:d}),r=d=>n.open(j,{id:d});function f(){n.open(j)}return U(()=>{i.fetchAll()}),(d,t)=>{const l=h("UButton");return m(),u("div",R,[e("div",W,[t[2]||(t[2]=q('<svg class="absolute top-0 right-7 w-[400px] h-[200px] opacity-10" viewBox="0 0 200 100" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="20" cy="80" r="20" stroke="#fff" stroke-width="30" fill="none"></circle><circle cx="20" cy="80" r="10" fill="#54774B" opacity="0.5"></circle><circle cx="100" cy="50" r="50" stroke="#fff" stroke-width="20" fill="none"></circle><circle cx="100" cy="50" r="12" fill="#54774B" opacity="0.3"></circle><path d="M 0 100 C 50 80, 150 80, 200 100" stroke="#fff" stroke-width="20" fill="none"></path></svg><h3 class="text-xl font-bold text-white z-10"> Hujjat turi </h3>',2)),o(l,{class:"z-10",variant:"primary",onClick:t[0]||(t[0]=a=>f())},{default:c(()=>[o(s(V),{"stroke-width":"3"}),t[1]||(t[1]=e("span",{class:"px-1"},"Qo‘shish",-1))]),_:1})]),e("div",Z,[e("div",ee,[e("div",te,[e("table",se,[t[3]||(t[3]=e("thead",{class:"bg-gray-50 dark:bg-gray-800"},[e("tr",null,[e("th",{class:"px-4 border-r py-3 text-left text-sm font-bold text-gray-700 dark:text-gray-200 uppercase"}," ID "),e("th",{class:"px-4 border-r py-3 text-left text-sm font-bold text-gray-700 dark:text-gray-200 uppercase"}," Nomi "),e("th",{class:"px-4 border-r py-3 text-left text-sm font-bold text-gray-700 dark:text-gray-200 uppercase"}," Yaratilgan "),e("th",{class:"px-4 py-3 text-left text-sm font-bold text-gray-700 dark:text-gray-200 uppercase"}," Tahrirlash ")])],-1)),e("tbody",oe,[(m(!0),u(N,null,D(s(i).subjects,a=>(m(),u("tr",{key:a.id,class:"hover:bg-[#F4F6FC]"},[e("td",ae,"ID-"+x(a.id),1),e("td",re,x(a.name_oz),1),e("td",le,x(s(Y)(a.created_at).format("DD MMMM YYYY")),1),e("td",ie,[o(l,{onClick:b=>r(a.id),variant:"hover"},{default:c(()=>[o(s(I),{class:"w-5 h-5"})]),_:1},8,["onClick"]),o(l,{onClick:b=>p(a.id),variant:"hover"},{default:c(()=>[o(s(T),{class:"w-5 h-5 text-red-500"})]),_:1},8,["onClick"])])]))),128))])])])])])])}}};export{me as default};
