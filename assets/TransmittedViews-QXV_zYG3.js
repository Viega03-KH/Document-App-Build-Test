import{d as ge}from"./dayjs.min-Cv2c9I67.js";import{a as N,u as R,H as ve,_ as j,b as ye,U as be,S as pe,L as _e}from"./UStatus-CYuOgW6z.js";import{a as le,N as F,B as H,r as D,e as f,o as u,i as l,g as d,F as B,b as S,D as ae,x as oe,s as U,y as O,t as V,f as t,h as C,z as P,c as $,L as E,u as ie,m as J,j as _,w as se,v as re,M as X}from"./index-BI14Y88U.js";import{u as ne,X as de,S as xe}from"./useFormValidate-CzyOW5d_.js";import{_ as ke}from"./UPagination-DwUj9Zqo.js";import"./chevron-right-xnhJiUp0.js";/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=le("circle-plus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=le("paperclip",[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]]),Se=()=>F.get("/organizations_list"),W=H("organizations",{state:()=>({organizations:[],selectedOrganizations:null,loading:!1,error:null}),actions:{async fetchAll(){try{this.loading=!0;const e=await Se();this.organizations=e.data}catch(e){this.error=e,console.error("Organizations olishda xato:",e)}finally{this.loading=!1}}}}),qe=()=>F.get("/doctype_list"),G=H("doctypes",{state:()=>({doctypes:[],selectedDoctypes:null,loading:!1,error:null}),actions:{async fetchAll(){try{this.loading=!0;const e=await qe();this.doctypes=e.data}catch(e){this.error=e,console.error("Doctypes olishda xato:",e)}finally{this.loading=!1}}}}),ze=()=>F.get("/delivery_type_list"),Z=H("delivery",{state:()=>({delivery:[],selectedDelivery:null,loading:!1,error:null}),actions:{async fetchAll(){try{this.loading=!0;const e=await ze();this.delivery=e.data}catch(e){this.error=e,console.error("Delivery olishda xato:",e)}finally{this.loading=!1}}}}),Ve=()=>F.get("/subject_list"),ee=H("subjects",{state:()=>({subjects:[],selectedSubject:null,loading:!1,error:null}),actions:{async fetchAll(){try{this.loading=!0;const e=await Ve();this.subjects=e.data}catch(e){this.error=e,console.error("Organizations olishda xato:",e)}finally{this.loading=!1}}}}),$e=()=>F.get("task_status_list"),te=H("status",{state:()=>({status:[],selectedStatus:null,loading:!1,error:null}),actions:{async fetchAll(){try{this.loading=!0;const e=await $e();this.status=e.data}catch(e){this.error=e,console.error("Status olishda xato:",e)}finally{this.loading=!1}}}}),ue={__name:"DockFormFields",props:{model:{type:Object,required:!0},errors:{type:Object,default:()=>({})}},setup(e){const o=W(),r=G(),s=Z(),c=te(),b=ee();return(p,n)=>{const v=D("USelect"),m=D("UInput"),x=D("UDatePicker"),y=D("UTextarea");return u(),f(B,null,[l(v,{modelValue:e.model.organization_id,"onUpdate:modelValue":n[0]||(n[0]=a=>e.model.organization_id=a),options:d(o).organizations,label:"Tashkilot",placeholder:"Tashkilotni tanlang","option-label":"name_oz","option-value":"id",loading:d(o).loading,error:e.errors?.organization_id},null,8,["modelValue","options","loading","error"]),l(v,{modelValue:e.model.doc_type_id,"onUpdate:modelValue":n[1]||(n[1]=a=>e.model.doc_type_id=a),options:d(r).doctypes,label:"Hujjat turi",placeholder:"Hujjat turini tanlang","option-label":"name_oz","option-value":"id",loading:d(r).loading,error:e.errors?.doc_type_id},null,8,["modelValue","options","loading","error"]),l(v,{modelValue:e.model.delivery_method_id,"onUpdate:modelValue":n[2]||(n[2]=a=>e.model.delivery_method_id=a),options:d(s).delivery,label:"Yetkazish usuli",placeholder:"Yetkazish usulini tanlang","option-label":"name_oz","option-value":"id",loading:d(s).loading,error:e.errors?.delivery_method_id},null,8,["modelValue","options","loading","error"]),l(v,{modelValue:e.model.subject_id,"onUpdate:modelValue":n[3]||(n[3]=a=>e.model.subject_id=a),options:d(b).subjects,label:"Mavzu",placeholder:"Mavzuni tanlang","option-label":"name_oz","option-value":"id",loading:d(b).loading,error:e.errors?.subject_id},null,8,["modelValue","options","loading","error"]),l(v,{modelValue:e.model.status_id,"onUpdate:modelValue":n[4]||(n[4]=a=>e.model.status_id=a),options:d(c).status,label:"Holati",placeholder:"Holatni tanlang","option-label":"name_oz","option-value":"id",loading:d(c).loading,error:e.errors?.status_id},null,8,["modelValue","options","loading","error"]),l(m,{modelValue:e.model.incoming_number,"onUpdate:modelValue":n[5]||(n[5]=a=>e.model.incoming_number=a),label:"Kiruvchi raqam",placeholder:"Kiruvchi raqamni kiriting",error:e.errors?.incoming_number},null,8,["modelValue","error"]),l(m,{modelValue:e.model.outgoing_number,"onUpdate:modelValue":n[6]||(n[6]=a=>e.model.outgoing_number=a),label:"Chiquvchi raqam",placeholder:"Chiquvchi raqamni kiriting",error:e.errors?.outgoing_number},null,8,["modelValue","error"]),l(m,{modelValue:e.model.document_name,"onUpdate:modelValue":n[7]||(n[7]=a=>e.model.document_name=a),label:"Hujjat nomi",placeholder:"Hujjat nomini kiriting",error:e.errors?.document_name},null,8,["modelValue","error"]),l(m,{modelValue:e.model.signed_by,"onUpdate:modelValue":n[8]||(n[8]=a=>e.model.signed_by=a),label:"Imzolovchi",placeholder:"Imzolovchini kiriting",error:e.errors?.signed_by},null,8,["modelValue","error"]),l(m,{modelValue:e.model.executor,"onUpdate:modelValue":n[9]||(n[9]=a=>e.model.executor=a),label:"Ijrochi",placeholder:"Ijrochini kiriting",error:e.errors?.executor},null,8,["modelValue","error"]),l(x,{modelValue:e.model.doc_date,"onUpdate:modelValue":n[10]||(n[10]=a=>e.model.doc_date=a),label:"Bajarish muddati",placeholder:"Sanani tanlang",error:e.errors?.doc_date},null,8,["modelValue","error"]),l(m,{modelValue:e.model.phone_number,"onUpdate:modelValue":n[11]||(n[11]=a=>e.model.phone_number=a),label:"Telefon raqami",placeholder:"+998 XX XXX XX XX",error:e.errors?.phone_number},null,8,["modelValue","error"]),l(y,{modelValue:e.model.short_content,"onUpdate:modelValue":n[12]||(n[12]=a=>e.model.short_content=a),label:"Qisqacha mazmun",placeholder:"Hujjatning qisqacha mazmunini kiriting",error:e.errors?.short_content},null,8,["modelValue","error"])],64)}}},Fe={class:"flex flex-col gap-2 w-full"},De={key:0,class:"text-md font-semibold text-dark"},Ue={class:"relative border-2 border-dashed rounded p-6 flex flex-col items-center justify-center cursor-pointer bg-white hover:bg-blue-50 dark:bg-zinc-700 dark:hover:bg-zinc-600 transition duration-200 shadow-sm hover:shadow-md"},Ce={class:"flex flex-col items-center justify-center text-zinc-400 dark:text-zinc-300 transition-transform duration-150"},He=["multiple","accept"],Ae={class:"mt-3 text-xs text-zinc-500 dark:text-zinc-400 select-none"},Ie={key:1,class:"text-md text-red-500 italic py-2"},Te={key:2,class:"space-y-2"},ce={__name:"UFileInput",props:{label:String,multiple:{type:Boolean,default:!1},accept:{type:String,default:""},modelValue:{type:Array,default:()=>[]},error:{type:String,default:""}},emits:["update:modelValue","change"],setup(e,{emit:o}){const r=e,s=o,c=S([...r.modelValue]),b=S(null);ae(()=>r.modelValue,v=>{c.value=[...v]});const p=v=>{const m=Array.from(v.target.files);if(!m.length)return;const x=m.map(y=>Object.assign(y,{isLocal:!0}));c.value=r.multiple?[...c.value,...x]:x,s("update:modelValue",c.value),s("change",c.value),b.value.value=""},n=v=>{c.value=c.value.filter(m=>m!==v),s("update:modelValue",c.value)};return(v,m)=>{const x=oe("wave");return u(),f("div",Fe,[e.label?(u(),f("label",De,V(e.label),1)):U("",!0),O((u(),f("div",Ue,[t("div",Ce,[l(d(je),{class:"w-14 h-14 mb-3"}),m[0]||(m[0]=t("p",{class:"text-sm text-zinc-700 dark:text-zinc-200 text-center leading-snug"},[C(" Faylni shu yerga "),t("span",{class:"text-blue-600 font-semibold"},"tortib keltiring"),C(),t("br"),C(" yoki "),t("span",{class:"text-blue-600 font-semibold"},"tanlang")],-1))]),t("input",{ref_key:"fileInput",ref:b,type:"file",class:"absolute inset-0 opacity-0 cursor-pointer",multiple:e.multiple,accept:e.accept,onChange:p},null,40,He),t("p",Ae,V(e.multiple?"Bir nechta fayllarni tanlang yoki tashlang":"Faylni tanlang yoki tashlang"),1)])),[[x]]),e.error?(u(),f("p",Ie,V(e.error),1)):U("",!0),c.value.length?(u(),f("div",Te,[(u(!0),f(B,null,P(c.value,y=>(u(),$(N,{key:y.name,file:y,"show-delete":!0,onRemove:n},null,8,["file"]))),128))])):U("",!0)])}}},Be=(e,o)=>F.post(`file-upload?task_id=${o}`,e,{headers:{"Content-Type":"multipart/form-data"}}),me=H("fileupload",{state:()=>({files:[],response:[],error:null}),actions:{setFiles(e){this.files=e},async upload(e){if(this.files.length){this.response=[],this.error=null;try{const o=new FormData;this.files.forEach(s=>{o.append("files[]",s)});const r=await Be(o,e);return this.response=r.data||[],console.log(r.data),this.response}catch(o){throw this.error=o.response?.data||o.message||o,console.log(o.response?.data),this.error}}},clear(){this.files=[],this.response=[],this.error=null}}}),Me=e=>F.post("/document_file_create",e),Pe=e=>F.delete(`/document_file_delete/${e}`),fe=H("documentfilecreate",{state:()=>({response:null,error:null,loading:!1}),actions:{async createFiles(e,o){if(!(!e||!o?.length)){this.loading=!0,this.error=null;try{const r={incoming_documents_id:e,files:o.map(c=>({url:c.url,type:c.type||"main"}))},s=await Me(r);return this.response=s.data,s.data}catch(r){throw this.error=r.response?.data||r.message,this.error}finally{this.loading=!1}}},async deleteFile(e){if(e){this.loading=!0,this.error=null;try{return(await Pe(e)).data}catch(o){throw this.error=o.response?.data||o.message,o}finally{this.loading=!1}}},clear(){this.response=null,this.error=null,this.loading=!1}}}),Le={class:"w-[80vw] h-[85vh] flex flex-col"},Ye={class:"flex justify-between modal-border items-center p-4 border-b shadow-sm"},Xe={key:0,class:"flex flex-col h-full justify-center overflow-y-auto"},Oe={key:1,class:"flex-1 overflow-y-auto px-6 py-10"},Ne={class:"grid grid-cols-1 md:grid-cols-2 gap-3 flex-1"},Ke={class:"w-full lg:w-1/3 flex flex-col"},Qe={key:0,class:"mt-4 flex-1 flex flex-col"},Re={class:"flex-1 overflow-y-auto space-y-2"},Ee={class:"flex modal-border justify-end gap-3 p-4 border-t"},Je={__name:"UpdateDockForm",props:{id:{type:Number,required:!0}},setup(e){const o=e,r=S([]),s=S([]),c=S(!0),b=R(),p=me(),n=fe(),v=E(),m=ie(),x=W(),y=G(),a=Z(),q=ee(),A=te(),{form:k,errors:z,validate:M,resetForm:I}=ne({organization_id:"",doc_type_id:"",doc_date:"",delivery_method_id:"",subject_id:"",incoming_number:"",outgoing_number:"",status_id:"",document_name:"",short_content:"",signed_by:"",executor:"",phone_number:"",files:[]},{organization_id:{required:!0,message:"Tashkilotni tanlang"},doc_type_id:{required:!0,message:"Hujjat turini tanlang"},delivery_method_id:{required:!0,message:"Yetkazish usulini tanlang"},subject_id:{required:!0,message:"Mavzu majburiy"},status_id:{required:!0,message:"Holatni tanlang"},incoming_number:{required:!0,message:"Kiruvchi raqam majburiy"},outgoing_number:{required:!0,message:"Chiquvchi raqam majburiy"},document_name:{required:!0,message:"Hujjat nomi majburiy"},short_content:{required:!0,message:"Qisqacha mazmun majburiy"},signed_by:{required:!0,message:"Imzolovchini kiriting"},executor:{required:!0,message:"Ijrochini kiriting"},phone_number:{required:!0,message:"Telefon raqamini kiriting"},doc_date:{required:!0,message:"Sanani tanlang"}}),K=()=>r.value.length===0&&k.files.length===0?(z.files="Asos hujjatni yuklang !",!1):(z.files="",!0),Q=i=>{i.id?(s.value.push(i.id),r.value=r.value.filter(g=>g.id!==i.id)):i instanceof File&&(k.files=k.files.filter(g=>g!==i))};J(async()=>{await Promise.all([x.fetchAll(),y.fetchAll(),a.fetchAll(),q.fetchAll(),A.fetchAll()]);const i=await b.fetchDock(o.id);Object.assign(k,{organization_id:i.organization_id,doc_type_id:i.doc_type_id,delivery_method_id:i.delivery_method_id,subject_id:i.subject_id,status_id:i.status_id,incoming_number:i.incoming_number,outgoing_number:i.outgoing_number,document_name:i.document_name,short_content:i.short_content,signed_by:i.signed_by,executor:i.executor,phone_number:i.phone_number,doc_date:i.doc_date,files:[]}),r.value=i.files||[],c.value=!1});const L=async i=>{k.files.length&&(p.files=[...k.files],await p.upload(i),p.response?.length&&await n.createFiles(i,p.response))},T=async()=>{const i=M(),g=K();if(!i||!g){m.show("Iltimos, formani to‘liq to‘ldiring !","error");return}try{await b.createDock(o.id,k);for(const w of s.value)await n.deleteFile(w);s.value=[],await L(o.id),await b.fetchAll(),h(),m.show("Hujjat muvaffaqiyatli yangilandi !","success")}catch(w){console.error(w),m.show("Hujjatni yangilashda xatolik !","error")}},h=()=>{I(),p.clear(),v.close()};return(i,g)=>{const w=D("UButton"),he=D("ULoadingspin");return u(),f("div",Le,[t("div",Ye,[g[1]||(g[1]=t("p",{class:"text-dark text-lg font-semibold"},"Hujjatni tahrirlash",-1)),l(w,{variant:"hover",onClick:h},{default:_(()=>[l(d(de),{class:"w-5 h-5"})]),_:1})]),c.value?(u(),f("div",Xe,[l(he,{size:"md"})])):(u(),f("div",Oe,[t("form",{onSubmit:se(T,["prevent"]),class:"flex flex-col lg:flex-row gap-6 h-full"},[t("div",Ne,[l(ue,{model:d(k),errors:d(z)},null,8,["model","errors"])]),t("div",Ke,[l(ce,{modelValue:d(k).files,"onUpdate:modelValue":g[0]||(g[0]=Y=>d(k).files=Y),label:"Hujjat yuklash (asosiy faylni birnchi yuklang)",multiple:"",accept:".pdf,.docx,.jpg,.png",error:d(z).files},null,8,["modelValue","error"]),r.value.length?(u(),f("div",Qe,[t("div",Re,[(u(!0),f(B,null,P(r.value,Y=>(u(),$(N,{key:Y.id,file:Y,"show-delete":!0,onRemove:Q},null,8,["file"]))),128))])])):U("",!0)])],32),g[2]||(g[2]=t("div",{class:"h-20"},null,-1))])),t("div",Ee,[l(w,{onClick:h},{default:_(()=>[...g[3]||(g[3]=[C("Bekor qilish",-1)])]),_:1}),l(w,{variant:"primary",onClick:T,loading:d(b).loading},{default:_(()=>[...g[4]||(g[4]=[C(" Yangilash va yuborish ",-1)])]),_:1},8,["loading"])])])}}},We=e=>F.post("/incoming_document_draft",e),Ge=H("draftDock",{state:()=>({data:null,loading:!1,error:null}),actions:{async createDraft(e){this.loading=!0,this.error=null;try{const o=await We(e);return this.data=o.data,console.log(o.data),o}catch(o){throw this.error=o.message,console.error(o),o}finally{this.loading=!1}}}}),Ze={class:"w-[80vw] h-[85vh] flex flex-col"},et={class:"flex justify-between modal-border items-center p-4 border-b shadow-sm"},tt={class:"overflow-y-auto px-6 py-10 flex-1"},lt={class:"grid grid-cols-1 md:grid-cols-2 gap-3 flex-1"},at={class:"w-full lg:w-1/3 flex flex-col"},ot={key:0,class:"mt-4 flex-1 flex flex-col"},it={class:"flex-1 overflow-y-auto space-y-2"},st={class:"flex justify-end gap-3 p-4 border-t modal-border"},rt={__name:"CreateDockForm",setup(e){const o=Ge(),r=R(),s=me(),c=fe(),b=E(),p=ie(),n=W(),v=G(),m=Z(),x=ee(),y=te(),{form:a,errors:q,validate:A,resetForm:k}=ne({organization_id:"",doc_type_id:"",doc_date:"",delivery_method_id:"",subject_id:"",incoming_number:"",status_id:"",document_name:"",short_content:"",signed_by:"",executor:"",phone_number:"",files:[]},{organization_id:{required:!0,message:"Tashkilotni tanlang"},doc_type_id:{required:!0,message:"Hujjat turini tanlang"},delivery_method_id:{required:!0,message:"Yetkazish usulini tanlang"},subject_id:{required:!0,message:"Mavzuni tanlang"},status_id:{required:!0,message:"Statusni tanlang"},incoming_number:{required:!0,message:"Kiruvchi raqamni kiriting"},outgoing_number:{required:!0,message:"Chiquvchi raqamni kiriting"},document_name:{required:!0,message:"Hujjat nomi majburiy"},short_content:{required:!0,message:"Qisqacha mazmun majburiy"},signed_by:{required:!0,message:"Imzolovchi majburiy"},executor:{required:!0,message:"Ijrochi majburiy"},phone_number:{required:!0,message:"Telefon raqami majburiy"},doc_date:{required:!0,message:"Sanani tanlang"},files:{required:!0,message:"Asos hujjatni yuklang !"}}),z=S(null),M=S(null),I=S([]);J(async()=>{try{await Promise.all([n.fetchAll(),v.fetchAll(),m.fetchAll(),x.fetchAll(),y.fetchAll()]);const h=localStorage.getItem("user");if(h&&(M.value=JSON.parse(h).id),M.value){const{data:i}=await o.createDraft({user_id:M.value});z.value=i?.incoming_document_create_id,p.show(`Hujjat (ID: ${z.value}) muvaffaqiyatli yaratildi!`,"success")}}catch(h){console.error("CreateDockForm onMounted error:",h),p.show("Hujjat yaratishda xatolik yuz berdi!","error")}});const K=async h=>{if(h.id)try{await c.deleteFile(h.id),I.value=I.value.filter(i=>i.id!==h.id)}catch{alert("Fayl o‘chirishda xatolik!")}else h instanceof File&&(a.files=a.files.filter(i=>i!==h))},Q=async h=>{!h||!a.files.length||(s.files=[...a.files],await s.upload(h),s.response?.length&&await c.createFiles(h,s.response))},L=async()=>{if(!A()){p.show("Iltimos, formani to‘ldiring !","error");return}if(z.value)try{await r.createDock(z.value,a),await Q(z.value),T(),p.show("Hujjat muvaffaqiyatli saqlandi va yuborildi!","success")}catch(h){console.error("handleSubmit error:",h),p.show("Hujjatni saqlashda xatolik yuz berdi!","error")}},T=()=>{k(),s.clear(),b.close()};return(h,i)=>{const g=D("UButton");return u(),f("div",Ze,[t("div",et,[i[1]||(i[1]=t("p",{class:"text-dark text-lg font-semibold"},"Hujjat yaratish",-1)),l(g,{variant:"hover",onClick:T},{default:_(()=>[l(d(de),{class:"w-5 h-5"})]),_:1})]),t("div",tt,[t("form",{onSubmit:se(L,["prevent"]),class:"flex flex-col lg:flex-row gap-6 h-full"},[t("div",lt,[l(ue,{model:d(a),errors:d(q)},null,8,["model","errors"])]),t("div",at,[l(ce,{modelValue:d(a).files,"onUpdate:modelValue":i[0]||(i[0]=w=>d(a).files=w),label:"Hujjat yuklash (asosiy faylni birnchi yuklang)",multiple:"",accept:".pdf,.docx,.jpg,.png",error:d(q).files},null,8,["modelValue","error"]),I.value.length?(u(),f("div",ot,[t("div",it,[(u(!0),f(B,null,P(I.value,w=>(u(),$(N,{key:w.id,file:w,"show-delete":!0,onRemove:K},null,8,["file"]))),128))])])):U("",!0)])],32),i[2]||(i[2]=t("div",{class:"h-20"},null,-1))]),t("div",st,[l(g,{onClick:T},{default:_(()=>[...i[3]||(i[3]=[C("Bekor qilish",-1)])]),_:1}),l(g,{variant:"primary",onClick:L,loading:d(r).loading},{default:_(()=>[...i[4]||(i[4]=[C(" Saqlash va yuborish ",-1)])]),_:1},8,["loading"])])])}}},nt={class:"flex flex-col md:flex-row md:items-start justify-between gap-4 md:gap-6"},dt={class:"flex-1 min-w-0"},ut={class:"text-xl font-semibold text-zinc-800 dark:text-white/90"},ct={class:"flex flex-col gap-1 font-medium text-md"},mt={class:"flex-1 min-w-0 truncate"},ft={class:"flex gap-1"},ht={class:"card-dark mt-2 inline-flex rounded-full border px-2 py-0.5 text-md font-semibold truncate max-w-full"},gt={class:"card-dark mt-2 inline-flex rounded-full border px-2 py-0.5 text-md font-semibold truncate max-w-full"},vt={class:"card-dark mt-2 inline-flex rounded-full border px-2 py-0.5 text-md font-semibold truncate max-w-full"},yt={class:"card-dark mt-2 inline-flex rounded-full border px-2 py-0.5 text-md font-semibold truncate max-w-full"},bt={class:"flex-shrink-0 mt-2 md:mt-0"},pt="task card-dark border-b px-3 py-2 cursor-pointer hover:bg-blue-100 dark:hover:bg-zinc-600/50",_t={__name:"DockListItem",props:{dock:{type:Object,required:!0},active:{type:Boolean,default:!1}},setup(e){return(o,r)=>{const s=D("UTooltip");return u(),f("div",{onClick:r[0]||(r[0]=c=>o.$emit("select",e.dock)),class:re([pt,e.active?"bg-blue-100":""])},[t("div",nt,[t("div",dt,[t("h4",ut,"SSV-"+V(e.dock.id)+"/05",1),t("div",ct,[t("span",mt,[r[1]||(r[1]=t("span",{class:"font-semibold whitespace-nowrap"},"Mazmun:",-1)),C(" "+V(e.dock.short_content?.slice(0,200))+V((e.dock.short_content?.length??0)>50?"...":""),1)])]),t("div",ft,[l(s,{text:"Ijrochi",position:"bottom"},{default:_(()=>[t("span",ht,V(e.dock.executor),1)]),_:1}),l(s,{text:"Kirish raqami",position:"bottom"},{default:_(()=>[t("span",gt,V(e.dock.incoming_number),1)]),_:1}),l(s,{text:"Chiqish raqami",position:"bottom"},{default:_(()=>[t("span",vt,V(e.dock.outgoing_number),1)]),_:1}),l(s,{text:"Yaratilgan sana",position:"bottom"},{default:_(()=>[t("span",yt,V(e.dock.doc_date?d(ge)(e.dock.doc_date).format("YYYY-MM-DD HH:mm"):""),1)]),_:1})])]),t("div",bt,[l(s,{text:"Ijro holatida",position:"top"},{default:_(()=>[l(d(ve),{class:"w-5 h-5 text-blue-500"})]),_:1})])])],2)}}},xt={key:0},kt={class:"grid grid-cols-1 md:grid-cols-2 gap-4 pb-4"},wt={key:0},jt={class:"space-y-2"},St={__name:"DockShowItem",props:{dockfile:{type:Object,default:null}},setup(e){return(o,r)=>e.dockfile?(u(),f("div",xt,[t("div",kt,[l(j,{label:"Kelib tushgan raqam",value:e.dockfile.incoming_number},null,8,["value"]),l(j,{label:"Chiqish raqami",value:e.dockfile.outgoing_number},null,8,["value"]),l(j,{label:"Hujjat nomi",value:e.dockfile.document_name,class:"md:col-span-2"},null,8,["value"]),l(j,{label:"Ijrochi",value:e.dockfile.executor},null,8,["value"]),l(j,{label:"Telefon raqam",value:e.dockfile.phone_number},null,8,["value"]),l(j,{label:"Holati",value:e.dockfile.status_id},null,8,["value"]),l(j,{label:"Qisqa mazmun",value:e.dockfile.short_content,class:"md:col-span-2"},null,8,["value"]),l(j,{label:"Tashkilot",value:e.dockfile.organization_name_oz},null,8,["value"]),l(j,{label:"Hujjat turi",value:e.dockfile.doc_type_name_oz},null,8,["value"]),l(j,{label:"Yetkazib berish usuli",value:e.dockfile.delivery_methods_name_oz},null,8,["value"]),l(j,{label:"Masala turi",value:e.dockfile.issue_type_name_oz},null,8,["value"]),l(j,{label:"Bajarish muddate",value:e.dockfile.doc_date},null,8,["value"])]),e.dockfile.files?.length?(u(),f("div",wt,[r[0]||(r[0]=t("h3",{class:"font-semibold mb-2"},"Fayllar:",-1)),t("div",jt,[(u(!0),f(B,null,P(e.dockfile.files,s=>(u(),$(N,{key:s.id,file:s},null,8,["file"]))),128))])])):U("",!0)])):(u(),$(ye,{key:1}))}},qt={class:"mx-auto"},zt={class:"w-full card-dark flex items-center justify-between rounded px-2"},Vt={class:"grid grid-cols-1 lg:grid-cols-12"},$t={class:"card-dark border"},Ft={class:"flex px-1 py-4 items-center border-b card-border justify-between"},Dt={class:"flex gap-1"},Ut={class:"h-[calc(100vh-8rem)] overflow-y-auto"},Ct={key:0,class:"lg:col-span-5 2xl:col-span-5 pb-10 space-y-2"},Ht={class:"card-dark border"},At={class:"flex px-1 py-4 items-center border-b card-border justify-between"},It={class:"h-[calc(100vh-8rem)] overflow-y-auto"},Xt={__name:"TransmittedViews",setup(e){const o=R(),r=E(),s=S(null),c=S(null),b=S(!0),p=y=>o.fetchAll(y);function n(){r.open(rt)}function v(){s.value&&r.open(Je,{id:s.value.id})}function m(){b.value=!b.value}function x(y){c.value=y.id,s.value=y}return ae(()=>o.docks,y=>{if(s.value){const a=y.find(q=>q.id===s.value.id);a&&(s.value=a)}},{deep:!0}),J(async()=>{await o.fetchAll()}),(y,a)=>{const q=oe("wave");return u(),f("div",qt,[t("div",zt,[l(be),l(X,{onClick:n,customClass:"rounded-full",variant:"primary"},{default:_(()=>[l(d(we),{class:"w-5 h-5"}),a[0]||(a[0]=t("span",{class:"px-1"},"Hujjat yaratish",-1))]),_:1})]),t("div",Vt,[t("div",{class:re(b.value?"lg:col-span-7 2xl:col-span-7":"lg:col-span-12 2xl:col-span-12")},[t("div",$t,[t("div",Ft,[a[1]||(a[1]=t("h2",{class:"text-lg p-2 font-semibold text-dark"},"Topshiriqlar",-1)),t("div",Dt,[O((u(),$(X,{variant:"hover"},{default:_(()=>[l(d(pe),{"stroke-width":1,class:"w-6 h-6"})]),_:1})),[[q]]),O((u(),$(X,{variant:"hover",onClick:m},{default:_(()=>[l(d(_e),{"stroke-width":1,class:"w-6 h-6"})]),_:1})),[[q]])])]),t("div",Ut,[(u(!0),f(B,null,P(d(o).docks,A=>O((u(),$(_t,{key:A.id,dock:A,active:c.value===A.id,onSelect:x},null,8,["dock","active"])),[[q]])),128)),l(ke,{total:d(o).pagination.total,currentPage:d(o).pagination.current_page,lastPage:d(o).pagination.last_page,onChange:p},null,8,["total","currentPage","lastPage"]),a[2]||(a[2]=t("div",{class:"h-24 w-full"},null,-1))])])],2),b.value?(u(),f("div",Ct,[t("div",Ht,[t("div",At,[a[3]||(a[3]=t("h2",{class:"text-lg p-2 font-semibold text-dark"},"Hujjat",-1)),s.value?(u(),$(X,{key:0,onClick:v,variant:"hover"},{default:_(()=>[l(d(xe),{"stroke-width":1,class:"w-6 h-6"})]),_:1})):U("",!0)]),t("div",It,[l(St,{dockfile:s.value,class:"p-2"},null,8,["dockfile"]),a[4]||(a[4]=t("div",{class:"h-24 w-full"},null,-1))])])])):U("",!0)])])}}};export{Xt as default};
