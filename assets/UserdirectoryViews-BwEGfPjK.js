import{i as q,r as w,b as y,o as p,e,g as $,t as v,d as l,w as m,f as h,G as z,y as N,j as R,p as A,F as M,s as D,q as S,c as E,_ as L,m as C,T as j,n as X,l as T,a as _}from"./index-BV_ShH1x.js";import{C as H}from"./chevron-right-oC-HST5Y.js";/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=q("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=q("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=q("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=q("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),K={class:"flex items-center w-full px-6 py-4 justify-between border-t-2 dark:border-zinc-600 dark:shadow-black"},Q={class:"text-dark text-lg"},W={class:"text-blue-500 font-extrabold"},Z={class:"flex items-center"},ee={class:"px-4 py-2 text-sm font-medium text-gray-700"},te={__name:"UPagination",props:{currentPage:{type:Number,required:!0},lastPage:{type:Number,required:!0},total:{type:Number,required:!0}},setup(a){return(t,s)=>{const u=w("UButton");return p(),y("div",K,[e("div",Q,[s[2]||(s[2]=$("Jadvalda mavjud barcha ma’lumotlar ustunlari ro‘yxati ",-1)),e("span",W,v(a.total),1),s[3]||(s[3]=$(" ta ",-1))]),e("div",Z,[l(u,{variant:"primary",disabled:a.currentPage===1,onClick:s[0]||(s[0]=r=>t.$emit("change",a.currentPage-1))},{default:m(()=>[l(h(Y),{class:"w-4 h-4"}),s[4]||(s[4]=e("span",{class:"hidden sm:inline"},"Previous",-1))]),_:1},8,["disabled"]),e("span",ee,v(a.currentPage)+" / "+v(a.lastPage),1),l(u,{variant:"primary",disabled:a.currentPage===a.lastPage,onClick:s[1]||(s[1]=r=>t.$emit("change",a.currentPage+1))},{default:m(()=>[s[5]||(s[5]=e("span",{class:"hidden sm:inline"},"Next",-1)),l(h(H),{class:"w-4 h-4"})]),_:1},8,["disabled"])])])}}},ae=(a=1)=>z.get(`/user_list?page=${a}`),se=a=>z.post("/user_create",a),le=a=>z.get(`/user_show/${a}`),oe=(a,t)=>z.put(`/user_update/${a}`,t),ne=a=>z.delete(`/user_destroy/${a}`),F=N("users",{state:()=>({users:[],pagination:{current_page:1,last_page:1,total:0},selectedUser:null,loading:!1,error:null}),actions:{async fetchUsers(a=1){this.loading=!0;const t=await ae(a);this.users=t.data,this.pagination.current_page=t.data.current_page,this.pagination.last_page=t.data.last_page,this.pagination.total=t.data.total,console.log(t.data);try{this.users=t.data}catch(s){this.error=s.message||"Foydalanuvchilarni olishda xatolik yuz berdi"}finally{this.loading=!1}},async fetchUser(a){this.loading=!0;try{const t=await le(a);this.selectedUser=t.data}catch(t){this.error=t.message}finally{this.loading=!1}},async addUser(a){this.loading=!0;try{return await se(a),await this.fetchUsers(),{success:!0}}catch(t){return this.error=t.message,{success:!1,error:t.message}}finally{this.loading=!1}},async editUser(a,t){this.loading=!0,this.error=null;try{const s=await oe(a,t);return await this.fetchUsers(),{success:!0,data:s.data}}catch(s){return this.error=s.response?.data?.message||s.message,console.error("Foydalanuvchini tahrirlashda xatolik:",this.error),{success:!1,error:this.error}}finally{this.loading=!1}},async removeUser(a){this.loading=!0;try{await ne(a),await this.fetchUsers()}catch(t){this.error=t.message}finally{this.loading=!1}}}}),re={class:"min-w-full border-collapse"},ie={class:"card-dark text-dark bg-zinc-100 border-b-2"},de={class:"divide-y dark:divide-zinc-600 divide-zinc-100"},ue={class:"px-4 py-3.5 sm:px-6"},ce={class:"flex items-center gap-3"},me={class:"font-medium text-dark"},pe={class:"px-4 py-3.5 sm:px-6"},fe={class:"flex items-center gap-3"},ve={class:"flex items-center justify-center w-10 h-10 rounded-full bg-[#fdf2fa]"},he={class:"text-xs font-semibold text-[#dd2590]"},_e={class:"block font-medium text-dark"},ye={class:"text-zinc-500 dark:text-zinc-400 text-sm"},ge={class:"px-4 py-3.5 sm:px-6 text-dark"},xe={class:"rounded-full bg-blue-500 px-1 text-zinc-100"},be={class:"px-4 py-3.5 sm:px-6 text-dark"},ke={class:"px-4 py-3.5 sm:px-6 text-dark"},we={class:"px-4 py-3.5 sm:px-6"},Ue={class:"flex items-center"},$e={__name:"UserList",emits:["edit-user","delete-user"],setup(a){const t=F(),s=[{key:"id",label:"Foydalanuvchi ID raqami"},{key:"name",label:"To‘liq ism va elektron pochta"},{key:"departments_id",label:"Roll"},{key:"role_names",label:"Bo‘lim yoki lavozim nomi"},{key:"created_at",label:"Yaratilgan sana va vaqt"},{key:"actions",label:"Amallar (tahrirlash / o‘chirish)"}];R(()=>{t.fetchUsers()});const u=r=>{t.fetchUsers(r)};return(r,f)=>{const c=w("UButton"),g=A("wave");return p(),y(M,null,[e("table",re,[e("thead",ie,[e("tr",null,[(p(),y(M,null,D(s,i=>e("th",{key:i.key,class:"px-4 text-start py-3.5 sm:px-6"},v(i.label),1)),64))])]),e("tbody",de,[(p(!0),y(M,null,D(h(t).users.data,(i,n)=>(p(),y("tr",{key:i.id||n},[e("td",ue,[e("div",ce,[e("span",me," UserID-00"+v(i.id)+"/01 ",1)])]),e("td",pe,[e("div",fe,[e("div",ve,[e("span",he,v(i.name.slice(0,2).toUpperCase()),1)]),e("div",null,[e("span",_e,v(i.name),1),e("span",ye,v(i.email),1)])])]),e("td",ge,[e("span",xe,v(i.role_names),1)]),e("td",be,v(i.departments_id),1),e("td",ke,v(i.created_at),1),e("td",we,[e("div",Ue,[S((p(),E(c,{onClick:V=>r.$emit("edit-user",i),class:"p-2 rounded-full hover:bg-zinc-200 dark:hover:bg-zinc-600"},{default:m(()=>[l(h(G),{class:"w-5 h-5"})]),_:1},8,["onClick"])),[[g]]),S((p(),E(c,{onClick:V=>r.$emit("delete-user",i.id),class:"p-2 rounded-full hover:bg-zinc-200 dark:hover:bg-zinc-600"},{default:m(()=>[l(h(J),{class:"w-5 h-5"})]),_:1},8,["onClick"])),[[g]])])])]))),128))])]),l(te,{total:h(t).pagination.total,currentPage:h(t).pagination.current_page,lastPage:h(t).pagination.last_page,onChange:u},null,8,["total","currentPage","lastPage"])],64)}}},Ve={key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40"},Me={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},ze={class:"flex items-center justify-between p-4 border-b dark:border-zinc-700"},Ce={class:"text-lg font-semibold text-dark"},qe={class:"p-4 text-dark"},Be={key:0,class:"flex justify-end gap-3 p-4 border-t dark:border-zinc-700"},Pe={__name:"UModal",props:{modelValue:{type:Boolean,default:!1},title:{type:String,default:"Modal title"},width:{type:String,default:"max-w-lg w-full"}},emits:["update:modelValue"],setup(a,{emit:t}){const s=t,u=()=>s("update:modelValue",!1);return(r,f)=>{const c=w("UButton");return p(),y("div",null,[l(j,{name:"fade"},{default:m(()=>[a.modelValue?(p(),y("div",Ve)):C("",!0)]),_:1}),l(j,{name:"fade-scale"},{default:m(()=>[a.modelValue?(p(),y("div",Me,[e("div",{class:X(["card-dark rounded shadow-2xl border transition-all duration-200",a.width])},[e("div",ze,[e("h3",Ce,v(a.title),1),l(c,{onClick:u},{default:m(()=>[l(h(O),{size:"20"})]),_:1})]),e("div",qe,[T(r.$slots,"default",{},void 0,!0)]),r.$slots.footer?(p(),y("div",Be,[T(r.$slots,"footer",{},void 0,!0)])):C("",!0)],2)])):C("",!0)]),_:3})])}}},I=L(Pe,[["__scopeId","data-v-9d71bdaa"]]),Fe={class:"space-y-6"},De={class:"flex flex-wrap -mx-2"},Se={class:"w-full px-2 py-2 xl:w-1/2"},Ee={class:"w-full px-2 py-2 xl:w-1/2"},je={class:"w-full px-2 py-2 xl:w-1/2"},Te={class:"w-full px-2 py-2 xl:w-1/2"},Ie={class:"w-full px-2 py-2 xl:w-1/2"},Ne={class:"w-full px-2 py-2 xl:w-1/2"},Re={class:"w-full px-2 py-2 xl:w-1/2"},Ae={key:0,class:"w-full px-2 py-2 xl:w-1/2"},Le={__name:"UserForm",setup(a,{expose:t}){const s=F(),u=_(!1),r=_(""),f=_("info"),c=_(0),g=_(!1),i={id:null,name:"",email:"",lastname:"",firstname:"",middlename:"",gender:"",departments_id:"",role_names:"",password:""},n=_({...i}),V=(b=null)=>{b?(g.value=!0,n.value={...b}):(g.value=!1,n.value={...i}),u.value=!0},U=()=>{u.value=!1},x=async()=>{try{const b=g.value?await s.editUser(n.value.id,n.value):await s.addUser(n.value);f.value=b?.success?"success":"error",r.value=b?.success?"Muvaffaqiyatli!":"Xatolik yuz berdi!"}catch{f.value="error",r.value="Server bilan aloqa xatosi!"}finally{c.value++,U()}};return t({openModal:V}),(b,o)=>{const B=w("UAlert"),P=w("UButton"),k=w("UInput");return p(),y(M,null,[l(B,{message:r.value,type:f.value,trigger:c.value},null,8,["message","type","trigger"]),e("div",null,[l(P,{variant:"primary",onClick:o[0]||(o[0]=d=>V())},{default:m(()=>[...o[10]||(o[10]=[$(" Foydalanuvchi qo‘shish ",-1)])]),_:1}),l(I,{modelValue:u.value,"onUpdate:modelValue":o[9]||(o[9]=d=>u.value=d),width:"max-w-3xl",title:g.value?"Foydalanuvchini tahrirlash":"Foydalanuvchi qo‘shish"},{footer:m(()=>[l(P,{onClick:U,disabled:h(s).loading},{default:m(()=>[...o[11]||(o[11]=[$(" Bekor qilish ",-1)])]),_:1},8,["disabled"]),l(P,{variant:"primary",onClick:x,loading:h(s).loading},{default:m(()=>[$(v(g.value?"Yangilash":"Saqlash"),1)]),_:1},8,["loading"])]),default:m(()=>[e("div",Fe,[e("div",De,[e("div",Se,[l(k,{type:"text",modelValue:n.value.name,"onUpdate:modelValue":o[1]||(o[1]=d=>n.value.name=d),label:"Name",placeholder:"Enter name",required:""},null,8,["modelValue"])]),e("div",Ee,[l(k,{modelValue:n.value.email,"onUpdate:modelValue":o[2]||(o[2]=d=>n.value.email=d),type:"email",label:"Email",placeholder:"Enter email",required:""},null,8,["modelValue"])]),e("div",je,[l(k,{type:"text",modelValue:n.value.lastname,"onUpdate:modelValue":o[3]||(o[3]=d=>n.value.lastname=d),label:"Last name",placeholder:"Enter last name"},null,8,["modelValue"])]),e("div",Te,[l(k,{type:"text",modelValue:n.value.firstname,"onUpdate:modelValue":o[4]||(o[4]=d=>n.value.firstname=d),label:"First name",placeholder:"Enter first name"},null,8,["modelValue"])]),e("div",Ie,[l(k,{type:"text",modelValue:n.value.middlename,"onUpdate:modelValue":o[5]||(o[5]=d=>n.value.middlename=d),label:"Middle name",placeholder:"Enter middle name"},null,8,["modelValue"])]),e("div",Ne,[l(k,{modelValue:n.value.departments_id,"onUpdate:modelValue":o[6]||(o[6]=d=>n.value.departments_id=d),label:"Department ID",placeholder:"Enter department ID"},null,8,["modelValue"])]),e("div",Re,[l(k,{modelValue:n.value.role_names,"onUpdate:modelValue":o[7]||(o[7]=d=>n.value.role_names=d),label:"Role",placeholder:"Enter role"},null,8,["modelValue"])]),g.value?C("",!0):(p(),y("div",Ae,[l(k,{modelValue:n.value.password,"onUpdate:modelValue":o[8]||(o[8]=d=>n.value.password=d),label:"Password",placeholder:"Enter password"},null,8,["modelValue"])]))])])]),_:1},8,["modelValue","title"])])],64)}}},Xe={__name:"UserDelete",setup(a,{expose:t}){const s=_(""),u=_("info"),r=_(0),f=F(),c=_(!1),g=_(null),i=U=>{g.value=U,c.value=!0},n=()=>{c.value=!1},V=async()=>{try{await f.removeUser(g.value),c.value=!1,u.value="success",s.value="Muvaffaqiyatli!"}catch(U){console.error("Foydalanuvchini o‘chirishda xato:",U),u.value="error",s.value="Xatolik!"}r.value++};return t({openModal:i}),(U,x)=>{const b=w("UAlert"),o=w("UButton");return p(),y(M,null,[l(b,{message:s.value,type:u.value,trigger:r.value},null,8,["message","type","trigger"]),l(I,{modelValue:c.value,"onUpdate:modelValue":x[0]||(x[0]=B=>c.value=B),width:"max-w-md",title:"Foydalanuvchini o‘chirish"},{footer:m(()=>[l(o,{onClick:n,disabled:h(f).loading},{default:m(()=>[...x[1]||(x[1]=[$(" Bekor qilish ",-1)])]),_:1},8,["disabled"]),l(o,{variant:"danger",onClick:V,loading:h(f).loading},{default:m(()=>[...x[2]||(x[2]=[$(" O‘chirish ",-1)])]),_:1},8,["loading"])]),default:m(()=>[x[3]||(x[3]=e("div",{class:"space-y-4 text-center py-4"},[e("p",{class:"text-gray-700 text-base"}," Siz rostdan ham bu foydalanuvchini o‘chirmoqchimisiz? ")],-1))]),_:1},8,["modelValue"])],64)}}},He={class:"min-h-[80vh] flex flex-col space-y-6 px-4 py-6"},Ye={class:"flex flex-col gap-5 sm:flex-row sm:items-center sm:justify-between"},Ge={class:"flex flex-col gap-3 sm:flex-row sm:items-center"},Je={class:"flex-1 overflow-hidden shadow rounded card-dark border-2"},Oe={class:"max-w-full overflow-x-auto custom-scrollbar"},We={__name:"UserdirectoryViews",setup(a){const t=_(),s=_();function u(f=null){t.value.openModal(f)}function r(f){s.value.openModal(f)}return(f,c)=>(p(),y("div",He,[e("div",Ye,[c[0]||(c[0]=e("h3",{class:"text-xl font-bold text-dark"}," Tizim foydalanuvchilari ",-1)),e("div",Ge,[l(Le,{ref_key:"userFormRef",ref:t},null,512),l(Xe,{ref_key:"userDeleteRef",ref:s},null,512)])]),e("div",Je,[e("div",Oe,[l($e,{onEditUser:u,onDeleteUser:r})])])]))}};export{We as default};
