import{u as z,_ as F}from"./OrganizationForm-DpQq-E7V.js";import{u as D}from"./doctypeStore-B0wtIOqB.js";import{u as C}from"./deliveryStore-mQ_sQNOq.js";import{u as q}from"./subjectStore-DfyQnKpG.js";import{u as $,_ as I}from"./UFileCard-B-rxju5X.js";import{k as X,G as B,r as y,a as h,o as g,b as d,g as n,f as u,h as T,d as w,C as _,p as V,v as j,j as k,F as A,x as H,c as P,E as f,A as v}from"./index-CSjzk14l.js";import{P as N}from"./useFormValidate-BcjMOXJJ.js";/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=X("paperclip",[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]]),E={class:"flex flex-col w-full"},L={class:"flex flex-row items-end justify-between gap-4"},M={class:"grid grid-cols-1 md:grid-cols-3 gap-[32px] flex-1 py-8"},K={class:"flex py-[16px]"},ge={__name:"DockFormFields",props:{model:{type:Object,required:!0},errors:{type:Object,default:()=>({})}},setup(e){const t=B();function a(){t.open(F)}const s=z(),r=D(),p=C();$();const b=q();return(x,o)=>{const i=y("USelect"),m=y("UButton"),c=y("UInput"),S=y("UDatePicker"),U=y("UTextarea");return g(),h("div",E,[d("div",L,[n(i,{modelValue:e.model.organization_id,"onUpdate:modelValue":o[0]||(o[0]=l=>e.model.organization_id=l),options:u(s).organizations,label:"Tashkilot",placeholder:"Tashkilotni tanlang","option-label":"name_oz","option-value":"id",loading:u(s).loading,error:e.errors?.organization_id},null,8,["modelValue","options","loading","error"]),n(m,{onClick:a,variant:"primary",customClass:"w-1/4"},{default:T(()=>[n(u(N),{"stroke-width":3}),o[12]||(o[12]=d("span",{class:"px-2"},"Tashkelot qo'shish",-1))]),_:1})]),d("div",M,[n(i,{modelValue:e.model.doc_type_id,"onUpdate:modelValue":o[1]||(o[1]=l=>e.model.doc_type_id=l),options:u(r).doctypes,label:"Hujjat turi",placeholder:"Hujjat turini tanlang","option-label":"name_oz","option-value":"id",loading:u(r).loading,error:e.errors?.doc_type_id},null,8,["modelValue","options","loading","error"]),n(i,{modelValue:e.model.delivery_method_id,"onUpdate:modelValue":o[2]||(o[2]=l=>e.model.delivery_method_id=l),options:u(p).list,label:"Yetkazish usuli",placeholder:"Yetkazish usulini tanlang","option-label":"name_oz","option-value":"id",loading:u(p).loading,error:e.errors?.delivery_method_id},null,8,["modelValue","options","loading","error"]),n(i,{modelValue:e.model.subject_id,"onUpdate:modelValue":o[3]||(o[3]=l=>e.model.subject_id=l),options:u(b).subjects,label:"Mavzu",placeholder:"Mavzuni tanlang","option-label":"name_oz","option-value":"id",loading:u(b).loading,error:e.errors?.subject_id},null,8,["modelValue","options","loading","error"]),n(c,{modelValue:e.model.incoming_number,"onUpdate:modelValue":o[4]||(o[4]=l=>e.model.incoming_number=l),label:"Kiruvchi raqam",placeholder:"Kiruvchi raqamni kiriting",error:e.errors?.incoming_number},null,8,["modelValue","error"]),n(c,{modelValue:e.model.outgoing_number,"onUpdate:modelValue":o[5]||(o[5]=l=>e.model.outgoing_number=l),label:"Chiquvchi raqam",placeholder:"Chiquvchi raqamni kiriting",error:e.errors?.outgoing_number},null,8,["modelValue","error"]),n(c,{modelValue:e.model.document_name,"onUpdate:modelValue":o[6]||(o[6]=l=>e.model.document_name=l),label:"Hujjat nomi",placeholder:"Hujjat nomini kiriting",error:e.errors?.document_name},null,8,["modelValue","error"]),n(c,{modelValue:e.model.signed_by,"onUpdate:modelValue":o[7]||(o[7]=l=>e.model.signed_by=l),label:"Imzolovchi",placeholder:"Imzolovchini kiriting",error:e.errors?.signed_by},null,8,["modelValue","error"]),n(c,{modelValue:e.model.executor,"onUpdate:modelValue":o[8]||(o[8]=l=>e.model.executor=l),label:"Ijrochi",placeholder:"Ijrochini kiriting",error:e.errors?.executor},null,8,["modelValue","error"]),n(S,{modelValue:e.model.doc_date,"onUpdate:modelValue":o[9]||(o[9]=l=>e.model.doc_date=l),label:"Bajarish muddati",placeholder:"Sanani tanlang",error:e.errors?.doc_date,type:"date"},null,8,["modelValue","error"]),n(c,{modelValue:e.model.phone_number,"onUpdate:modelValue":o[10]||(o[10]=l=>e.model.phone_number=l),label:"Telefon raqami",placeholder:"+998 XX-XXX-XX-XX",error:e.errors?.phone_number},null,8,["modelValue","error"])]),d("div",K,[n(U,{modelValue:e.model.short_content,"onUpdate:modelValue":o[11]||(o[11]=l=>e.model.short_content=l),label:"Qisqacha mazmun",placeholder:"Hujjatning qisqacha mazmunini kiriting",error:e.errors?.short_content},null,8,["modelValue","error"])])])}}},Y={class:"flex flex-col gap-2 w-full"},G={key:0,class:"text-md font-bold text-dark"},Q={class:"relative border items-center border-[rgba(226,230,245,1)] shadow-sm card-dark rounded-[16px] px-[24px] py-[12px] outline-none transition duration-200 w-full"},R={class:"flex flex-col items-center justify-center text-gray-400 dark:text-gray-300 transition-transform duration-150"},W=["multiple","accept"],J={key:1,class:"text-md text-red-500 italic py-2"},Z={key:2,class:"space-y-2"},he={__name:"UFileInput",props:{label:String,multiple:{type:Boolean,default:!1},accept:{type:String,default:""},modelValue:{type:Array,default:()=>[]},error:{type:String,default:""}},emits:["update:modelValue","change"],setup(e,{emit:t}){const a=e,s=t,r=w([...a.modelValue]),p=w(null);_(()=>a.modelValue,o=>{r.value=[...o]});const b=o=>{const i=Array.from(o.target.files);if(!i.length)return;const m=i.map(c=>Object.assign(c,{isLocal:!0}));r.value=a.multiple?[...r.value,...m]:m,s("update:modelValue",r.value),s("change",r.value),p.value.value=""},x=o=>{r.value=r.value.filter(i=>i!==o),s("update:modelValue",r.value)};return(o,i)=>(g(),h("div",Y,[e.label?(g(),h("label",G,j(e.label),1)):V("",!0),d("div",Q,[d("div",R,[n(u(O),{"stroke-width":"1",class:"w-10 h-10"}),i[0]||(i[0]=d("p",{class:"text-sm text-gray-700 dark:text-gray-200 text-center leading-snug"},[k(" Faylni shu yerga "),d("span",{class:"text-blue-600 font-semibold"},"tortib keltiring"),k(),d("br"),k(" yoki "),d("span",{class:"text-blue-600 font-semibold"},"tanlang")],-1))]),d("input",{ref_key:"fileInput",ref:p,type:"file",class:"absolute inset-0 opacity-0 cursor-pointer",multiple:e.multiple,accept:e.accept,onChange:b},null,40,W)]),e.error?(g(),h("p",J,j(e.error),1)):V("",!0),r.value.length?(g(),h("div",Z,[(g(!0),h(A,null,H(r.value,m=>(g(),P(I,{key:m.name,file:m,"show-delete":!0,onRemove:x},null,8,["file"]))),128))])):V("",!0)]))}},ee=(e=1,t)=>{const a={page:e};return t!=null&&(a.status_id=t),f.get("/incoming_document_list",{params:a})},te=(e,t)=>f.post(`/incoming_document_create_or_update/${e}`,t),oe=e=>f.get(`/incoming_document_show/${e}`),fe=v("dock",{state:()=>({docks:[],pagination:{current_page:1,last_page:1,total:0},selectedDock:null,loading:!1,error:null,status_id:null}),actions:{async fetchAll(e=1){this.loading=!0,this.error=null;try{const t=await ee(e,this.status_id);this.docks=t.data.data,this.pagination.current_page=t.data.current_page,this.pagination.last_page=t.data.last_page,this.pagination.total=t.data.total}catch(t){this.error=t.message}finally{this.loading=!1}},async createDock(e,t){this.loading=!0,this.error=null;try{const a=await te(e,t);a.data.success?await this.fetchAll():this.error=a.data.message}catch(a){this.error=a?.message,console.error(a)}finally{this.loading=!1}},async fetchDock(e){this.loading=!0;try{const t=await oe(e);return this.selectedDock=t.data,t.data}catch(t){this.error=t.message}finally{this.loading=!1}}}}),le=(e,t)=>f.post(`file-upload?task_id=${t}`,e,{headers:{"Content-Type":"multipart/form-data"}}),pe=v("fileupload",{state:()=>({files:[],response:[],error:null}),actions:{setFiles(e){this.files=e},async upload(e){if(this.files.length){this.response=[],this.error=null;try{const t=new FormData;this.files.forEach(s=>{t.append("files[]",s)});const a=await le(t,e);return this.response=a.data||[],console.log(a.data),this.response}catch(t){throw this.error=t.response?.data||t.message||t,console.log(t.response?.data),this.error}}},clear(){this.files=[],this.response=[],this.error=null}}}),ae=e=>f.post("/document_file_create",e),re=e=>f.delete(`/document_file_delete/${e}`),ye=v("documentfilecreate",{state:()=>({response:null,error:null,loading:!1}),actions:{async createFiles(e,t){if(!(!e||!t?.length)){this.loading=!0,this.error=null;try{const a={incoming_documents_id:e,files:t.map(r=>({url:r.url,type:r.type||"main"}))},s=await ae(a);return this.response=s.data,s.data}catch(a){throw this.error=a.response?.data||a.message,this.error}finally{this.loading=!1}}},async deleteFile(e){if(e){this.loading=!0,this.error=null;try{return(await re(e)).data}catch(t){throw this.error=t.response?.data||t.message,t}finally{this.loading=!1}}},clear(){this.response=null,this.error=null,this.loading=!1}}});export{ge as _,pe as a,ye as b,he as c,fe as u};
