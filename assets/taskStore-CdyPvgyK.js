import{k as g,d as y,r as p,a as v,o as x,b as r,g as l,U as h,h as m,f,E as n,A as w}from"./index-m9snDiDH.js";import{T as b}from"./trash-2-BvdWlrNA.js";/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=g("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=g("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),T={class:"flex flex-col shadow-sm"},S={class:"card-dark border-x border-b"},V={class:"grid grid-cols-3 p-6 gap-4"},U={class:"flex items-center gap-4 justify-end p-6"},$={__name:"UFilter",setup(s){const e=y({number:"",status:null,keyword:null,oldYears:!1,replyLetter:!1}),a=[{label:"Bajarilgan",value:"done"},{label:"Jarayonda",value:"progress"},{label:"Kutilmoqda",value:"pending"}],i=[{label:"Majburiy",value:"required"},{label:"Muhim",value:"important"},{label:"Oddiy",value:"normal"}];function d(){e.value={number:"",status:null,keyword:null,oldYears:!1,replyLetter:!1}}function u(){console.log("Searching with:",e.value)}return(C,t)=>{const k=p("UInput"),c=p("UButton");return x(),v("div",T,[r("div",S,[t[3]||(t[3]=r("div",{class:"flex p-3 items-center border-b card-border justify-between"},[r("h2",{class:"text-[14px] p-2 font-bold uppercase text-[#282F3D]"},"Qidirish")],-1)),r("div",V,[l(k,{modelValue:e.value.number,"onUpdate:modelValue":t[0]||(t[0]=o=>e.value.number=o),placeholder:"Hujjat raqami"},null,8,["modelValue"]),l(h,{options:a,modelValue:e.value.status,"onUpdate:modelValue":t[1]||(t[1]=o=>e.value.status=o),placeholder:"Holati"},null,8,["modelValue"]),l(h,{options:i,modelValue:e.value.keyword,"onUpdate:modelValue":t[2]||(t[2]=o=>e.value.keyword=o),placeholder:"Kalit soâ€˜zi"},null,8,["modelValue"])]),t[4]||(t[4]=r("div",{class:"flex flex-wrap gap-8 items-center pt-2"},null,-1))]),r("div",U,[l(c,{class:"flex items-center",onClick:d},{default:m(()=>[l(f(b),{"stroke-width":"2.5",class:"w-5 h-5"}),t[5]||(t[5]=r("span",{class:"px-2"},"Tozalash",-1))]),_:1}),l(c,{variant:"primary",class:"flex items-center",onClick:u},{default:m(()=>[l(f(_),{"stroke-width":"2.5",class:"w-5 h-5"}),t[6]||(t[6]=r("span",{class:"px-2"},"Qidirish",-1))]),_:1})])])}}},j=s=>n.post(`/task_create?page=${page}`,s),B=(s=1)=>n.get("/task_list"),M=s=>n.get(`/task_view/${s}`),N=(s,e)=>n.put(`/task_update/${s}`,e),q=s=>n.delete(`/task_delete/${s}`),F=w("task",{state:()=>({tasks:[],pagination:{current_page:1,last_page:1,total:0},selectedTask:null,loading:!1,error:null}),actions:{async createTask(s={}){this.loading=!0,this.error=null;try{const e=await j(s);if(e?.data?.success){const a=e.data.task;return a&&this.tasks.push(a),a}else this.error=e?.data?.message||"Noma'lum xatolik"}catch(e){this.error=e?.response?.data?.message||e.message||"Server xatosi"}finally{this.loading=!1}},async fetchAll(s=1){this.loading=!0,this.error=null;try{const e=await B(s);return this.tasks=e.data.data||[],this.pagination.current_page=e.data.current_page,this.pagination.last_page=e.data.last_page,this.pagination.total=e.data.total,this.tasks}catch(e){this.error=e?.response?.data?.message||e.message||"Server xatosi"}finally{this.loading=!1}},async fetchOne(s){this.loading=!0,this.error=null;try{const e=await M(s);return this.selectedTask=e?.data||null,this.selectedTask}catch(e){this.error=e?.response?.data?.message||e.message||"Server xatosi"}finally{this.loading=!1}},async update(s,e={}){this.loading=!0,this.error=null;try{const a=await N(s,e);if(a?.data?.success){const i=a.data.task,d=this.tasks.findIndex(u=>u.id===s);return d!==-1&&(this.tasks[d]=i),i}else this.error=a?.data?.message||"Noma'lum xatolik"}catch(a){this.error=a?.response?.data?.message||a.message||"Server xatosi"}finally{this.loading=!1}},async delete(s){this.loading=!0,this.error=null;try{const e=await q(s);return e?.data?.success?(this.tasks=this.tasks.filter(a=>a.id!==s),!0):(this.error=e?.data?.message||"Noma'lum xatolik",!1)}catch(e){return this.error=e?.response?.data?.message||e.message||"Server xatosi",!1}finally{this.loading=!1}},setSelectedTask(s){this.selectedTask=s}}});export{O as H,_ as S,$ as _,F as u};
