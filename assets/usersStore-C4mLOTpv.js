import{a as d,R as u,N as o,B as h}from"./index-CJXrJkbj.js";/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=d("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=d("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function k(e={},t={}){const s=u({...e}),a=u({});return{form:s,errors:a,validate:()=>{let r=!0;for(const n in t){const c=s[n],i=t[n];if(a[n]="",i.required&&(!c||c.toString().trim()==="")&&(a[n]=i.message||"Majburiy maydon",r=!1),i.custom&&typeof i.custom=="function"){const l=i.custom(c,s);l&&(a[n]=l,r=!1)}}return r},resetForm:()=>{Object.assign(s,e),Object.keys(a).forEach(r=>a[r]="")}}}const g=(e=1)=>o.get(`/user_list?page=${e}`),f=e=>o.post("/user_create",e),p=e=>o.get(`/user_show/${e}`),y=(e,t)=>o.put(`/user_update/${e}`,t),m=e=>o.delete(`/user_destroy/${e}`),S=h("users",{state:()=>({users:[],pagination:{current_page:1,last_page:1,total:0},selectedUser:null,loading:!1,error:null}),actions:{async fetchUsers(e=null){this.loading=!0,this.error=null;try{const t=e||this.pagination.current_page,s=await g(t);this.users=s.data.data||s.data,this.pagination.current_page=s.data.current_page,this.pagination.last_page=s.data.last_page,this.pagination.total=s.data.total}catch(t){this.error=t.message}finally{this.loading=!1}},async fetchUser(e){this.loading=!0;try{const t=await p(e);return this.selectedUser=t.data,t.data}catch(t){this.error=t.message}finally{this.loading=!1}},async addUser(e){this.loading=!0;try{return await f(e),await this.fetchUsers(),{success:!0}}catch(t){return this.error=t.message,{success:!1,error:t.message}}finally{this.loading=!1}},async editUser(e,t){this.loading=!0,this.error=null;try{const s=await y(e,t);return await this.fetchUsers(),{success:!0,data:s.data}}catch(s){return this.error=s.message,{success:!1,error:this.error}}finally{this.loading=!1}},async removeUser(e){this.loading=!0;try{await m(e),await this.fetchUsers()}catch(t){this.error=t.message}finally{this.loading=!1}}}});export{v as S,b as X,S as a,k as u};
